[debug] [2025-02-17T09:40:38.744Z] ----------------------------------------------------------------------
[debug] [2025-02-17T09:40:38.749Z] Command:       E:\Node\node.exe C:\Users\PC\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-02-17T09:40:38.749Z] CLI Version:   13.29.1
[debug] [2025-02-17T09:40:38.750Z] Platform:      win32
[debug] [2025-02-17T09:40:38.750Z] Node Version:  v22.1.0
[debug] [2025-02-17T09:40:38.750Z] Time:          Mon Feb 17 2025 18:40:38 GMT+0900 (대한민국 표준시)
[debug] [2025-02-17T09:40:38.750Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-02-17T09:40:38.837Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-02-17T09:40:38.838Z] > authorizing via signed-in user (simjsik75@gmail.com)
[debug] [2025-02-17T09:40:38.838Z] [iam] checking project meloudy-96af8 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-02-17T09:40:38.839Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:40:38.839Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:40:38.840Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions [none]
[debug] [2025-02-17T09:40:38.840Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:40:38.840Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-02-17T09:40:40.049Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions 200
[debug] [2025-02-17T09:40:40.049Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-02-17T09:40:40.049Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:40:40.049Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:40:40.049Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/meloudy-96af8/serviceAccounts/meloudy-96af8@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-02-17T09:40:40.049Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/meloudy-96af8/serviceAccounts/meloudy-96af8@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-02-17T09:40:41.390Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/meloudy-96af8/serviceAccounts/meloudy-96af8@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-02-17T09:40:41.390Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/meloudy-96af8/serviceAccounts/meloudy-96af8@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'meloudy-96af8'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] +  functions: Finished running predeploy script. 
[debug] [2025-02-17T09:41:05.780Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:05.781Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:05.781Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 [none]
[debug] [2025-02-17T09:41:06.941Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 200
[debug] [2025-02-17T09:41:06.942Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 {"projectNumber":"640370611193","projectId":"meloudy-96af8","lifecycleState":"ACTIVE","name":"Meloudy","labels":{"firebase":"enabled"},"createTime":"2024-10-21T22:24:57.261827Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-02-17T09:41:06.944Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:06.944Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:06.944Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:06.944Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-02-17T09:41:06.945Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:06.945Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-02-17T09:41:06.945Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:06.945Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:06.946Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudfunctions.googleapis.com [none]
[debug] [2025-02-17T09:41:06.946Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:06.947Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/runtimeconfig.googleapis.com [none]
[debug] [2025-02-17T09:41:06.947Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:06.948Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudbuild.googleapis.com [none]
[debug] [2025-02-17T09:41:06.948Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudbuild.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:06.949Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/artifactregistry.googleapis.com [none]
[debug] [2025-02-17T09:41:06.950Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/artifactregistry.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:08.418Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/runtimeconfig.googleapis.com 200
[debug] [2025-02-17T09:41:08.418Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-02-17T09:41:08.429Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudbuild.googleapis.com 200
[debug] [2025-02-17T09:41:08.429Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-02-17T09:41:08.430Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudfunctions.googleapis.com 200
[debug] [2025-02-17T09:41:08.430Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-02-17T09:41:08.526Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/artifactregistry.googleapis.com 200
[debug] [2025-02-17T09:41:08.526Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-02-17T09:41:08.527Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:08.527Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:08.527Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/meloudy-96af8/adminSdkConfig [none]
[debug] [2025-02-17T09:41:09.825Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/meloudy-96af8/adminSdkConfig 200
[debug] [2025-02-17T09:41:09.825Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/meloudy-96af8/adminSdkConfig {"projectId":"meloudy-96af8","storageBucket":"meloudy-96af8.appspot.com","locationId":"asia-northeast3"}
[debug] [2025-02-17T09:41:09.826Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:09.826Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:09.826Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs [none]
[debug] [2025-02-17T09:41:10.259Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs 200
[debug] [2025-02-17T09:41:10.259Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs {"configs":[{"name":"projects/meloudy-96af8/configs/apienv"}]}
[debug] [2025-02-17T09:41:10.259Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:10.259Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:10.260Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables [none]
[debug] [2025-02-17T09:41:10.549Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables 200
[debug] [2025-02-17T09:41:10.550Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables {"variables":[{"name":"projects/meloudy-96af8/configs/apienv/variables/base_api_url","updateTime":"2025-02-17T08:48:45.387708371Z"}]}
[debug] [2025-02-17T09:41:10.550Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:10.550Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:10.550Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables/base_api_url [none]
[debug] [2025-02-17T09:41:10.823Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables/base_api_url 200
[debug] [2025-02-17T09:41:10.823Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables/base_api_url {"name":"projects/meloudy-96af8/configs/apienv/variables/base_api_url","updateTime":"2025-02-17T08:48:45.387708371Z","text":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/"}
[debug] [2025-02-17T09:41:10.825Z] Validating nodejs source
[warn] !  functions: Runtime Node.js 18 will be deprecated on 2025-04-30 and will be decommissioned on 2025-10-31, after which you will not be able to deploy without upgrading. Consider upgrading now to avoid disruption. See https://cloud.google.com/functions/docs/runtime-support for full details on the lifecycle policy 
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2025-02-17T09:41:13.129Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@types/cookie-parser": "^1.4.8",
    "cookie-parser": "^1.4.7",
    "express": "^4.21.2",
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.57.1",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2025-02-17T09:41:13.130Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-02-17T09:41:13.132Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-17T09:41:13.140Z] Found firebase-functions binary at 'E:\Web\webportfolio\React\Nextext\nextext\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8858

[error] (node:28524) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2025-02-17T09:41:22.342Z] Got response from /__/functions.yaml {"endpoints":{"setHasUpdateCommentFlag":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"posts/{postId}/comments/{commentId}"},"retry":false},"entryPoint":"setHasUpdateCommentFlag"},"setHasUpdateFlag":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"posts/{postId}"},"retry":false},"entryPoint":"setHasUpdateFlag"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[error] Redis 연결 실패: ConnectionTimeoutError: Connection timeout
    at Socket.<anonymous> (E:\Web\webportfolio\React\Nextext\nextext\node_modules\@redis\client\dist\lib\client\socket.js:177:124)
    at Object.onceWrapper (node:events:634:28)
    at Socket.emit (node:events:520:28)
    at Socket._onTimeout (node:net:590:8)
    at listOnTimeout (node:internal/timers:573:17)
    at process.processTimers (node:internal/timers:514:7)

[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-02-17T09:41:27.376Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:27.376Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:27.376Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/firebaseextensions.googleapis.com [none]
[debug] [2025-02-17T09:41:27.376Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:28.826Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/firebaseextensions.googleapis.com 200
[debug] [2025-02-17T09:41:28.826Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-02-17T09:41:28.827Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-02-17T09:41:28.827Z] > authorizing via signed-in user (simjsik75@gmail.com)
[debug] [2025-02-17T09:41:28.827Z] [iam] checking project meloudy-96af8 for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-02-17T09:41:28.827Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:28.827Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:28.827Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions [none]
[debug] [2025-02-17T09:41:28.827Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:28.827Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-02-17T09:41:29.994Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions 200
[debug] [2025-02-17T09:41:29.994Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-02-17T09:41:29.995Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:29.995Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:29.995Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/meloudy-96af8/instances pageSize=100&pageToken=
[debug] [2025-02-17T09:41:31.428Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/meloudy-96af8/instances 200
[debug] [2025-02-17T09:41:31.429Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/meloudy-96af8/instances {"instances":[{"name":"projects/meloudy-96af8/instances/firestore-algolia-search","createTime":"2024-12-12T07:57:23.836392Z","updateTime":"2024-12-12T09:26:08.500521Z","state":"ACTIVE","config":{"name":"projects/meloudy-96af8/instances/firestore-algolia-search/configurations/088d58cd-6237-4162-8d89-64cc49214874","createTime":"2024-12-12T09:20:59.879001Z","source":{"name":"projects/algolia-b2ebc/sources/a9ff9aba-022b-44af-83ef-04c8d1b85593","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/algolia-firestore-algolia-search-1.2.7-45aa5447-9f8b-46a6-95b9-5f7dbe3bda66.zip","hash":"9151b4368a9a5cee01940524e2c13b71929d366153f5cbd944edeb5c787b52c4","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"firestore-algolia-search","version":"1.2.7","description":"Enables full text search of your Cloud Firestore data with Algolia.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read."}],"resources":[{"name":"executeIndexOperation","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/${DATABASE_ID}/documents/${COLLECTION_PATH}/{documentID}\nlocation: ${LOCATION}\nruntime: nodejs18\n","description":"Firestore document-triggered function that creates, updates, or deletes data in Algolia.","deletionPolicy":"DELETE"},{"name":"executeFullIndexOperation","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nlocation: ${param:LOCATION}\nruntime: nodejs18\ntaskQueueTrigger: {}\ntimeout: 540s\n","description":"Loads all the data from your FireStore database into Algolia","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Algolia","url":"https://algolia.com"},"contributors":[{"authorName":"Sajid Momin","email":"sajid.momin@algolia.com","url":"https://github.com/smomin"}],"license":"Apache-2.0","sourceUrl":"https://github.com/algolia/firestore-algolia-search/tree/main","params":[{"param":"DATABASE_ID","label":"Database ID","type":"STRING","description":"Enter database that contains the collections that you want to monitor?\n","required":true,"default":"(default)","example":"test","immutable":true},{"param":"COLLECTION_PATH","label":"Collection Path","type":"STRING","description":"What is the path to the Cloud Firestore collection where the extension should monitor for changes?\n","required":true,"example":"store","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Firestore collection paths must be an odd number of segments separated by slashes, e.g. \"movies/{id}/actors\".","immutable":true},{"param":"FIELDS","label":"Indexable Fields","type":"STRING","description":"This can be a comma separated list or left blank to index all fields. For performance reasons, [record size is limited](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/in-depth/index-and-records-size-and-usage-limitations/#record-size-limits). If you're receiving errors that your records are too large, refer to the [reducing record size documentation](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/how-to/reducing-object-size/).\n","example":"name,category,price,sales"},{"param":"FORCE_DATA_SYNC","label":"Force Data Sync","type":"SELECT","description":"The extension uses approaches to mitigate race conditions but it might not be a 100% fool proof.  This setting will make sure the function is using the latest data from Firestore by making another read call before processing and sending to Algolia.  note: This will be a add to your usage of Firestore.","options":[{"value":"no","label":"No"},{"value":"yes","label":"Yes"}],"default":"no"},{"param":"ALGOLIA_INDEX_NAME","label":"Algolia Index Name","type":"STRING","description":"This is the name of the [Algolia index](https://www.algolia.com/doc/faq/basics/what-is-an-index/) where the records will be persisted. Refer to [naming your index](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#naming-your-index) for more information.","required":true},{"param":"ALGOLIA_APP_ID","label":"Algolia Application Id","type":"STRING","description":"This is the Algolia application you want to index your data to. You can find your credentials including application ID on your Algolia dashboard, under the [API keys tab](https://www.algolia.com/api-keys).","required":true},{"param":"ALGOLIA_API_KEY","label":"Algolia API Key","type":"SECRET","description":"We recommend [creating a new API key](https://www.algolia.com/doc/guides/security/api-keys/#creating-and-managing-api-keys) with \"addObject\", \"deleteObject\", \"listIndexes\", \"deleteIndex\", \"editSettings\", and \"settings\" permissions. **Do not use the Admin API key**.","required":true},{"param":"ALT_OBJECT_ID","label":"Alternative Object Id","type":"STRING","description":"Specify an alternative Firestore document property to use for the Algolia record Id.  Use `(path)` if the document path is desired as the Algolia ObjectID.  The default is the Firestore document Id. **If you set this property, make sure to clear out the Algolia Index since the ObjectID will be different resulting in duplicate records.**"},{"param":"TRANSFORM_FUNCTION","label":"Transform Function Name (Experimental)","type":"STRING","description":"Specify a Firebase Cloud Function for any data transformation before saving into Algolia. Refer to [Call functions for your app](https://firebase.google.com/docs/functions/callable)."},{"param":"DO_FULL_INDEXING","label":"Full Index existing documents?","type":"SELECT","description":"Should existing documents in the Firestore collection be indexed as well?\n","required":true,"options":[{"value":"true","label":"Yes"},{"value":"false","label":"No"}]},{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"immutable":true}],"preinstallContent":"Use this extension to index your Cloud Firestore data to Algolia and keep it synced.  The extension is applied and configured on a Firestore [collection](https://firebase.google.com/docs/firestore/data-model#collections).\n\nThis extension listens for changes on the specified collection. If you add a [document](https://firebase.google.com/docs/firestore/data-model#documents), the extension indexes it as a [record in Algolia](https://www.algolia.com/doc/faq/basics/what-is-a-record/). The extension only indexes the fields defined in the extension configuration and uses the [document Id](https://firebase.google.com/docs/firestore/manage-data/add-data#add_a_document) as the Algolia [object Id](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#using-unique-object-identifiers).\n\nAnytime you update a document, the extension propagates the update to the corresponding Algolia record. If you delete a document, the extension removes the corresponding Algolia record.\n\n#### Important\n\nUpon installation or when the extension's configuration is changed, the documents in the specified collection will be synced to Algolia.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've\n[set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart)\nin your Firebase project.\n\nYou must also have an Algolia account set up before installing this\nextension. You can do so on the [Algolia](https://www.algolia.com/) site.\n\n#### Billing\n\nThis extension uses the following Firebase services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nThis extension also uses the following third-party services:\n\n- Algolia ([pricing information](https://www.algolia.com/pricing))\n\nYou are responsible for any costs associated with your use of these services.\n\n#### Note from Firebase\n\nTo install this extension, your Firebase project must be on the Blaze (pay-as-you-go) plan. You will only be charged for the resources you use. Most Firebase services offer a free tier for low-volume use. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nYou will be billed a small amount (typically less than $0.10) when you install or reconfigure this extension. See Cloud Functions under [Firebase Pricing](https://firebase.google.com/pricing) for a detailed explanation.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to the [Cloud Firestore tab](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't exist already, create a collection called `${param:COLLECTION_PATH}`.\n\n1.  Create, update, or delete a document in the `${param:COLLECTION_PATH}` collection.  Go to Algolia's dashboard and verify in Algolia that a record is created, updated, or deleted in the `${param:ALGOLIA_INDEX_NAME}` index for application id `${param:ALGOLIA_APP_ID}`.\n\n### Collection import\n\nIf the collection named `${param:COLLECTION_PATH}` exists, the extension has begun importing documents into the `${param:ALGOLIA_INDEX_NAME}` Algolia Index. Additionally, a full reindex will occur each time the extension's configuration changes.\n\nA `lastmodified` attribute is added to Algolia records to eliminate race condition issues related from the Cloud Function cold start.\n\n### Using the extension\n\nThis extension listens to the Cloud Firestore collection `${param:COLLECTION_PATH}`. If you create, update, or delete a document within that collection, this extension will:\n\n- Indexes the document and send all the fields or configured fields defined in the extension.\n- or, removes the record from Algolia index if the document is deleted.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Search Firestore with Algolia\n\n**Author**: Algolia (**[https://www.algolia.com](https://www.algolia.com)**)\n\n**Description**: Enable full text search of your Cloud Firestore data with Algolia.\n\n**Details**: Use this extension to index your Cloud Firestore data to [Algolia](https://www.algolia.com/doc/) and keep it synced.\n\nYou can then [configure your relevance](/doc/guides/getting-started/how-algolia-works/in-depth/implementation-process/#configuring-relevance) using the [Algolia dashboard](https://www.algolia.com/dashboard) or [API clients](/doc/api-client/getting-started/install/javascript/). From there, you can use Algolia's [front-end libraries](/doc/guides/building-search-ui/what-is-instantsearch/js/) to incorporate search components into your Firebase app's UI.\n\n---\n\nWe welcome [bug reports and feature requests](https://github.com/algolia/firestore-algolia-search/issues/new) as well as pull requests in this GitHub repository.\n\n### Firebase CLI\n\n```bash\nfirebase ext:install algolia/firestore-algolia-search --project=<your-project-id>\n```\n\n> Learn more about installing extensions in the Firebase Extensions documentation: [console](https://firebase.google.com/docs/extensions/install-extensions?platform=console), [CLI](https://firebase.google.com/docs/extensions/install-extensions?platform=cli)\n\n---\n\n#### Details\n\nUse this extension to index your Cloud Firestore data to Algolia and keep it synced.  The extension is applied and configured on a Firestore [collection](https://firebase.google.com/docs/firestore/data-model#collections) or [subcollection](https://firebase.google.com/docs/firestore/data-model#subcollections).\n\nThis extension listens for changes on the specified collection. If you add a [document](https://firebase.google.com/docs/firestore/data-model#documents), the extension indexes it as a [record in Algolia](https://www.algolia.com/doc/faq/basics/what-is-a-record/). The extension only indexes the fields defined in the extension configuration and uses the [document Id](https://firebase.google.com/docs/firestore/manage-data/add-data#add_a_document) as the Algolia [object Id](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#using-unique-object-identifiers).\n\nAnytime you update a document, the extension propagates the update to the corresponding Algolia record. If you delete a document, the extension removes the corresponding Algolia record.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've set up:\n- [Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n- [Algolia](https://www.algolia.com/) account.\n\n\n#### Billing\n\nThis extension uses the following Firebase services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nThis extension also uses the following third-party services:\n\n- Algolia ([pricing information](https://www.algolia.com/pricing))\n\nYou are responsible for any costs associated with your use of these services.\n\n#### Note from Firebase\n\nTo install this extension, your Firebase project must be on the Blaze (pay-as-you-go) plan. You will only be charged for the resources you use. Most Firebase services offer a free tier for low-volume use. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nYou will be billed a small amount (typically less than $0.10) when you install or reconfigure this extension. See Cloud Functions under [Firebase Pricing](https://firebase.google.com/pricing) for a detailed explanation.\n\n#### Configuration Parameters\n\nCloud Functions Location: Where do you want to deploy the functions created for this extension?\n  You usually want a location close to your database.\n  For help selecting a location, refer to the\n  [location selection guide](https://firebase.google.com/docs/functions/locations).\n- Database Id: Enter the database id that contains the collection(s) that you want to monitor?\n  Firebase supports [multiple databases](https://cloud.google.com/blog/products/databases/manage-multiple-firestore-databases-in-a-project) in a project.  In order to use a non default database, enter the database Id.\n\n- Collection Path: What is the path to the Cloud Firestore collection where the extension should monitor for changes?\n  For subcollection, the syntax is `parent_collection/{parentId}/target_collection`. (please note, there is not depublication process on subcollections).\n\n- Fields: What document fields should be indexed to provide the best search experience? For more information on which fields to index to Algolia, see the [Algolia documentation on records](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/#algolia-records).\n  This can be a comma separated list or left blank to index all fields.\n  For performance reasons, [record size is limited](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/in-depth/index-and-records-size-and-usage-limitations/#record-size-limits).\n  If you're receiving errors that your records are too large, refer to the [reducing record size documentation](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/how-to/reducing-object-size/).\n\n- Force Data Sync: Are you facing data inconsistent issues possibly due to race conditions?\n  This setting will make sure the function is using the latest data from Firestore by making another read call before processing and sending to Algolia.\n\n- Algolia Application ID: What is the Algolia Application Id?\n  This is the Algolia application you want to index your data to.\n  You can find your credentials including application ID on your Algolia dashboard,\n  under the [API keys tab](https://www.algolia.com/api-keys).\n\n- Algolia API Key: What is your Algolia API key?\n  We recommend [creating a new API key](https://www.algolia.com/doc/guides/security/api-keys/#creating-and-managing-api-keys)\n  with \"addObject\", \"deleteObject\", \"listIndexes\", \"deleteIndex\", \"editSettings\", and \"settings\" permissions.\n  **Do not use the Admin API key**.\n\n- Algolia Index Name: What is the Algolia index name?\n  This is the name of the [Algolia index](https://www.algolia.com/doc/faq/basics/what-is-an-index/)\n  where the records will be persisted.\n  Refer to [naming your index](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#naming-your-index) for more information.\n\n- Alternative Object Id: Are you looking to use another Firestore document property or document path as the Algolia ObjectID?\n  Specify an alternative Firestore document property to use for the Algolia record Id.  Use `(path)` if the document path is desired as the Algolia ObjectID.  The default is the Firestore document Id.\n  **If you set this property, make sure to clear out the Algolia Index since the ObjectID will be different resulting in duplicate records.**\n\n- Transform Function Name (experimental): What is the Firebase Cloud Function Name?\n  This is the name of the Firestore Cloud Function for transforming the data before transmitting to Algolia for indexing.\n  This function should be deployed to the same Firebase Project and Location as the Firestore/Algolia extension.\n  Refer to [Call functions for your app](https://firebase.google.com/docs/functions/callable).\n  Below is an example of a Transform function used for my testing:\n  ```javascript\n    import * as functions from \"firebase-functions\";\n\n    const doStuffToData = (payload: any) => {\n      return {\n      ...payload,\n      \"hello\": \"world\",\n      };\n    };\n\n    export const helloWorld = functions.https.onCall((payload) => {\n      const transformedData = doStuffToData(payload);\n      return transformedData;\n    });\n  ```\n  **Note**: The Transform Firebase Function should be set up to unauthenticated users at this time.\n\n#### Cloud Functions\n\n- **executeIndexOperation:** Firestore document-triggered function that creates, updates, or deletes data in Algolia.\n","externalServices":[{"name":"Algolia","pricingUri":"https://algolia.com/pricing"}],"lifecycleEvents":[{"stage":"ON_INSTALL","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"},{"stage":"ON_UPDATE","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"},{"stage":"ON_CONFIGURE","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"}],"displayName":"Search Firestore with Algolia","tags":["ai","search","semantic-search","vector-search","text-search"]},"fetchTime":"2024-07-05T04:35:11.264165Z","lastOperationName":"projects/algolia-b2ebc/operations/ea678f9d-3a07-446f-b67b-1edf37a705e0","state":"ACTIVE"},"params":{"ALGOLIA_APP_ID":"6BVM9P8U9W","COLLECTION_PATH":"posts","DO_FULL_INDEXING":"false","FIELDS":"title,userId,content,commentCount,images,tag,createAt","FORCE_DATA_SYNC":"yes","DATABASE_ID":"(default)","ALGOLIA_API_KEY":"projects/640370611193/secrets/firestore-algolia-search-ALGOLIA_API_KEY-b9l1/versions/1","ALGOLIA_INDEX_NAME":"post_index","LOCATION":"asia-northeast3"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to the [Cloud Firestore tab](https://console.firebase.google.com/project/meloudy-96af8/database/firestore/data).\n\n1.  If it doesn't exist already, create a collection called `posts`.\n\n1.  Create, update, or delete a document in the `posts` collection.  Go to Algolia's dashboard and verify in Algolia that a record is created, updated, or deleted in the `post_index` index for application id `6BVM9P8U9W`.\n\n### Collection import\n\nIf the collection named `posts` exists, the extension has begun importing documents into the `post_index` Algolia Index. Additionally, a full reindex will occur each time the extension's configuration changes.\n\nA `lastmodified` attribute is added to Algolia records to eliminate race condition issues related from the Cloud Function cold start.\n\n### Using the extension\n\nThis extension listens to the Cloud Firestore collection `posts`. If you create, update, or delete a document within that collection, this extension will:\n\n- Indexes the document and send all the fields or configured fields defined in the extension.\n- or, removes the record from Algolia index if the document is deleted.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"algolia/firestore-algolia-search","extensionVersion":"1.2.7","systemParams":{"firebaseextensions.v1beta.function/memory":"256","firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","firebaseextensions.v1beta.function/minInstances":"0"}},"lastOperationName":"projects/meloudy-96af8/operations/c7f640b5-1363-49ad-99bd-3e7bc88edd51","serviceAccountEmail":"ext-firestore-algolia-search@meloudy-96af8.iam.gserviceaccount.com","lastOperationType":"CONFIGURE","etag":"634a0a906e99eff3f9a59fb0d7d702d7981cb8c0b98b759ceccce12a05ba2c5c","runtimeData":{"stateUpdateTime":"2024-12-12T09:27:54.603472251Z","processingState":{"state":"PROCESSING_COMPLETE","detailMessage":"Existing documents were not indexed because \"Indexing existing documents?\" is configured to false. If you want to run a full reindex, reconfigure this instance."}}},{"name":"projects/meloudy-96af8/instances/firestore-algolia-search-user","createTime":"2024-12-13T05:54:24.030235Z","updateTime":"2024-12-13T05:59:36.391009Z","state":"ACTIVE","config":{"name":"projects/meloudy-96af8/instances/firestore-algolia-search-user/configurations/812391f9-0d6b-40cb-bf78-fce69a2fcacc","createTime":"2024-12-13T05:54:24.030235Z","source":{"name":"projects/algolia-b2ebc/sources/a9ff9aba-022b-44af-83ef-04c8d1b85593","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/algolia-firestore-algolia-search-1.2.7-45aa5447-9f8b-46a6-95b9-5f7dbe3bda66.zip","hash":"9151b4368a9a5cee01940524e2c13b71929d366153f5cbd944edeb5c787b52c4","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"firestore-algolia-search","version":"1.2.7","description":"Enables full text search of your Cloud Firestore data with Algolia.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read."}],"resources":[{"name":"executeIndexOperation","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/${DATABASE_ID}/documents/${COLLECTION_PATH}/{documentID}\nlocation: ${LOCATION}\nruntime: nodejs18\n","description":"Firestore document-triggered function that creates, updates, or deletes data in Algolia.","deletionPolicy":"DELETE"},{"name":"executeFullIndexOperation","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nlocation: ${param:LOCATION}\nruntime: nodejs18\ntaskQueueTrigger: {}\ntimeout: 540s\n","description":"Loads all the data from your FireStore database into Algolia","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Algolia","url":"https://algolia.com"},"contributors":[{"authorName":"Sajid Momin","email":"sajid.momin@algolia.com","url":"https://github.com/smomin"}],"license":"Apache-2.0","sourceUrl":"https://github.com/algolia/firestore-algolia-search/tree/main","params":[{"param":"DATABASE_ID","label":"Database ID","type":"STRING","description":"Enter database that contains the collections that you want to monitor?\n","required":true,"default":"(default)","example":"test","immutable":true},{"param":"COLLECTION_PATH","label":"Collection Path","type":"STRING","description":"What is the path to the Cloud Firestore collection where the extension should monitor for changes?\n","required":true,"example":"store","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Firestore collection paths must be an odd number of segments separated by slashes, e.g. \"movies/{id}/actors\".","immutable":true},{"param":"FIELDS","label":"Indexable Fields","type":"STRING","description":"This can be a comma separated list or left blank to index all fields. For performance reasons, [record size is limited](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/in-depth/index-and-records-size-and-usage-limitations/#record-size-limits). If you're receiving errors that your records are too large, refer to the [reducing record size documentation](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/how-to/reducing-object-size/).\n","example":"name,category,price,sales"},{"param":"FORCE_DATA_SYNC","label":"Force Data Sync","type":"SELECT","description":"The extension uses approaches to mitigate race conditions but it might not be a 100% fool proof.  This setting will make sure the function is using the latest data from Firestore by making another read call before processing and sending to Algolia.  note: This will be a add to your usage of Firestore.","options":[{"value":"no","label":"No"},{"value":"yes","label":"Yes"}],"default":"no"},{"param":"ALGOLIA_INDEX_NAME","label":"Algolia Index Name","type":"STRING","description":"This is the name of the [Algolia index](https://www.algolia.com/doc/faq/basics/what-is-an-index/) where the records will be persisted. Refer to [naming your index](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#naming-your-index) for more information.","required":true},{"param":"ALGOLIA_APP_ID","label":"Algolia Application Id","type":"STRING","description":"This is the Algolia application you want to index your data to. You can find your credentials including application ID on your Algolia dashboard, under the [API keys tab](https://www.algolia.com/api-keys).","required":true},{"param":"ALGOLIA_API_KEY","label":"Algolia API Key","type":"SECRET","description":"We recommend [creating a new API key](https://www.algolia.com/doc/guides/security/api-keys/#creating-and-managing-api-keys) with \"addObject\", \"deleteObject\", \"listIndexes\", \"deleteIndex\", \"editSettings\", and \"settings\" permissions. **Do not use the Admin API key**.","required":true},{"param":"ALT_OBJECT_ID","label":"Alternative Object Id","type":"STRING","description":"Specify an alternative Firestore document property to use for the Algolia record Id.  Use `(path)` if the document path is desired as the Algolia ObjectID.  The default is the Firestore document Id. **If you set this property, make sure to clear out the Algolia Index since the ObjectID will be different resulting in duplicate records.**"},{"param":"TRANSFORM_FUNCTION","label":"Transform Function Name (Experimental)","type":"STRING","description":"Specify a Firebase Cloud Function for any data transformation before saving into Algolia. Refer to [Call functions for your app](https://firebase.google.com/docs/functions/callable)."},{"param":"DO_FULL_INDEXING","label":"Full Index existing documents?","type":"SELECT","description":"Should existing documents in the Firestore collection be indexed as well?\n","required":true,"options":[{"value":"true","label":"Yes"},{"value":"false","label":"No"}]},{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"immutable":true}],"preinstallContent":"Use this extension to index your Cloud Firestore data to Algolia and keep it synced.  The extension is applied and configured on a Firestore [collection](https://firebase.google.com/docs/firestore/data-model#collections).\n\nThis extension listens for changes on the specified collection. If you add a [document](https://firebase.google.com/docs/firestore/data-model#documents), the extension indexes it as a [record in Algolia](https://www.algolia.com/doc/faq/basics/what-is-a-record/). The extension only indexes the fields defined in the extension configuration and uses the [document Id](https://firebase.google.com/docs/firestore/manage-data/add-data#add_a_document) as the Algolia [object Id](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#using-unique-object-identifiers).\n\nAnytime you update a document, the extension propagates the update to the corresponding Algolia record. If you delete a document, the extension removes the corresponding Algolia record.\n\n#### Important\n\nUpon installation or when the extension's configuration is changed, the documents in the specified collection will be synced to Algolia.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've\n[set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart)\nin your Firebase project.\n\nYou must also have an Algolia account set up before installing this\nextension. You can do so on the [Algolia](https://www.algolia.com/) site.\n\n#### Billing\n\nThis extension uses the following Firebase services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nThis extension also uses the following third-party services:\n\n- Algolia ([pricing information](https://www.algolia.com/pricing))\n\nYou are responsible for any costs associated with your use of these services.\n\n#### Note from Firebase\n\nTo install this extension, your Firebase project must be on the Blaze (pay-as-you-go) plan. You will only be charged for the resources you use. Most Firebase services offer a free tier for low-volume use. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nYou will be billed a small amount (typically less than $0.10) when you install or reconfigure this extension. See Cloud Functions under [Firebase Pricing](https://firebase.google.com/pricing) for a detailed explanation.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to the [Cloud Firestore tab](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't exist already, create a collection called `${param:COLLECTION_PATH}`.\n\n1.  Create, update, or delete a document in the `${param:COLLECTION_PATH}` collection.  Go to Algolia's dashboard and verify in Algolia that a record is created, updated, or deleted in the `${param:ALGOLIA_INDEX_NAME}` index for application id `${param:ALGOLIA_APP_ID}`.\n\n### Collection import\n\nIf the collection named `${param:COLLECTION_PATH}` exists, the extension has begun importing documents into the `${param:ALGOLIA_INDEX_NAME}` Algolia Index. Additionally, a full reindex will occur each time the extension's configuration changes.\n\nA `lastmodified` attribute is added to Algolia records to eliminate race condition issues related from the Cloud Function cold start.\n\n### Using the extension\n\nThis extension listens to the Cloud Firestore collection `${param:COLLECTION_PATH}`. If you create, update, or delete a document within that collection, this extension will:\n\n- Indexes the document and send all the fields or configured fields defined in the extension.\n- or, removes the record from Algolia index if the document is deleted.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Search Firestore with Algolia\n\n**Author**: Algolia (**[https://www.algolia.com](https://www.algolia.com)**)\n\n**Description**: Enable full text search of your Cloud Firestore data with Algolia.\n\n**Details**: Use this extension to index your Cloud Firestore data to [Algolia](https://www.algolia.com/doc/) and keep it synced.\n\nYou can then [configure your relevance](/doc/guides/getting-started/how-algolia-works/in-depth/implementation-process/#configuring-relevance) using the [Algolia dashboard](https://www.algolia.com/dashboard) or [API clients](/doc/api-client/getting-started/install/javascript/). From there, you can use Algolia's [front-end libraries](/doc/guides/building-search-ui/what-is-instantsearch/js/) to incorporate search components into your Firebase app's UI.\n\n---\n\nWe welcome [bug reports and feature requests](https://github.com/algolia/firestore-algolia-search/issues/new) as well as pull requests in this GitHub repository.\n\n### Firebase CLI\n\n```bash\nfirebase ext:install algolia/firestore-algolia-search --project=<your-project-id>\n```\n\n> Learn more about installing extensions in the Firebase Extensions documentation: [console](https://firebase.google.com/docs/extensions/install-extensions?platform=console), [CLI](https://firebase.google.com/docs/extensions/install-extensions?platform=cli)\n\n---\n\n#### Details\n\nUse this extension to index your Cloud Firestore data to Algolia and keep it synced.  The extension is applied and configured on a Firestore [collection](https://firebase.google.com/docs/firestore/data-model#collections) or [subcollection](https://firebase.google.com/docs/firestore/data-model#subcollections).\n\nThis extension listens for changes on the specified collection. If you add a [document](https://firebase.google.com/docs/firestore/data-model#documents), the extension indexes it as a [record in Algolia](https://www.algolia.com/doc/faq/basics/what-is-a-record/). The extension only indexes the fields defined in the extension configuration and uses the [document Id](https://firebase.google.com/docs/firestore/manage-data/add-data#add_a_document) as the Algolia [object Id](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#using-unique-object-identifiers).\n\nAnytime you update a document, the extension propagates the update to the corresponding Algolia record. If you delete a document, the extension removes the corresponding Algolia record.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've set up:\n- [Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n- [Algolia](https://www.algolia.com/) account.\n\n\n#### Billing\n\nThis extension uses the following Firebase services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nThis extension also uses the following third-party services:\n\n- Algolia ([pricing information](https://www.algolia.com/pricing))\n\nYou are responsible for any costs associated with your use of these services.\n\n#### Note from Firebase\n\nTo install this extension, your Firebase project must be on the Blaze (pay-as-you-go) plan. You will only be charged for the resources you use. Most Firebase services offer a free tier for low-volume use. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nYou will be billed a small amount (typically less than $0.10) when you install or reconfigure this extension. See Cloud Functions under [Firebase Pricing](https://firebase.google.com/pricing) for a detailed explanation.\n\n#### Configuration Parameters\n\nCloud Functions Location: Where do you want to deploy the functions created for this extension?\n  You usually want a location close to your database.\n  For help selecting a location, refer to the\n  [location selection guide](https://firebase.google.com/docs/functions/locations).\n- Database Id: Enter the database id that contains the collection(s) that you want to monitor?\n  Firebase supports [multiple databases](https://cloud.google.com/blog/products/databases/manage-multiple-firestore-databases-in-a-project) in a project.  In order to use a non default database, enter the database Id.\n\n- Collection Path: What is the path to the Cloud Firestore collection where the extension should monitor for changes?\n  For subcollection, the syntax is `parent_collection/{parentId}/target_collection`. (please note, there is not depublication process on subcollections).\n\n- Fields: What document fields should be indexed to provide the best search experience? For more information on which fields to index to Algolia, see the [Algolia documentation on records](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/#algolia-records).\n  This can be a comma separated list or left blank to index all fields.\n  For performance reasons, [record size is limited](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/in-depth/index-and-records-size-and-usage-limitations/#record-size-limits).\n  If you're receiving errors that your records are too large, refer to the [reducing record size documentation](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/how-to/reducing-object-size/).\n\n- Force Data Sync: Are you facing data inconsistent issues possibly due to race conditions?\n  This setting will make sure the function is using the latest data from Firestore by making another read call before processing and sending to Algolia.\n\n- Algolia Application ID: What is the Algolia Application Id?\n  This is the Algolia application you want to index your data to.\n  You can find your credentials including application ID on your Algolia dashboard,\n  under the [API keys tab](https://www.algolia.com/api-keys).\n\n- Algolia API Key: What is your Algolia API key?\n  We recommend [creating a new API key](https://www.algolia.com/doc/guides/security/api-keys/#creating-and-managing-api-keys)\n  with \"addObject\", \"deleteObject\", \"listIndexes\", \"deleteIndex\", \"editSettings\", and \"settings\" permissions.\n  **Do not use the Admin API key**.\n\n- Algolia Index Name: What is the Algolia index name?\n  This is the name of the [Algolia index](https://www.algolia.com/doc/faq/basics/what-is-an-index/)\n  where the records will be persisted.\n  Refer to [naming your index](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#naming-your-index) for more information.\n\n- Alternative Object Id: Are you looking to use another Firestore document property or document path as the Algolia ObjectID?\n  Specify an alternative Firestore document property to use for the Algolia record Id.  Use `(path)` if the document path is desired as the Algolia ObjectID.  The default is the Firestore document Id.\n  **If you set this property, make sure to clear out the Algolia Index since the ObjectID will be different resulting in duplicate records.**\n\n- Transform Function Name (experimental): What is the Firebase Cloud Function Name?\n  This is the name of the Firestore Cloud Function for transforming the data before transmitting to Algolia for indexing.\n  This function should be deployed to the same Firebase Project and Location as the Firestore/Algolia extension.\n  Refer to [Call functions for your app](https://firebase.google.com/docs/functions/callable).\n  Below is an example of a Transform function used for my testing:\n  ```javascript\n    import * as functions from \"firebase-functions\";\n\n    const doStuffToData = (payload: any) => {\n      return {\n      ...payload,\n      \"hello\": \"world\",\n      };\n    };\n\n    export const helloWorld = functions.https.onCall((payload) => {\n      const transformedData = doStuffToData(payload);\n      return transformedData;\n    });\n  ```\n  **Note**: The Transform Firebase Function should be set up to unauthenticated users at this time.\n\n#### Cloud Functions\n\n- **executeIndexOperation:** Firestore document-triggered function that creates, updates, or deletes data in Algolia.\n","externalServices":[{"name":"Algolia","pricingUri":"https://algolia.com/pricing"}],"lifecycleEvents":[{"stage":"ON_INSTALL","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"},{"stage":"ON_UPDATE","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"},{"stage":"ON_CONFIGURE","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"}],"displayName":"Search Firestore with Algolia","tags":["ai","search","semantic-search","vector-search","text-search"]},"fetchTime":"2024-07-05T04:35:11.264165Z","lastOperationName":"projects/algolia-b2ebc/operations/ea678f9d-3a07-446f-b67b-1edf37a705e0","state":"ACTIVE"},"params":{"ALGOLIA_INDEX_NAME":"user_index","ALGOLIA_API_KEY":"projects/640370611193/secrets/firestore-algolia-search-user-ALGOLIA_API_KEY/versions/1","DO_FULL_INDEXING":"false","DATABASE_ID":"(default)","LOCATION":"asia-northeast3","ALGOLIA_APP_ID":"6BVM9P8U9W","COLLECTION_PATH":"users","FIELDS":"displayName,photoURL","FORCE_DATA_SYNC":"no"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to the [Cloud Firestore tab](https://console.firebase.google.com/project/meloudy-96af8/database/firestore/data).\n\n1.  If it doesn't exist already, create a collection called `users`.\n\n1.  Create, update, or delete a document in the `users` collection.  Go to Algolia's dashboard and verify in Algolia that a record is created, updated, or deleted in the `user_index` index for application id `6BVM9P8U9W`.\n\n### Collection import\n\nIf the collection named `users` exists, the extension has begun importing documents into the `user_index` Algolia Index. Additionally, a full reindex will occur each time the extension's configuration changes.\n\nA `lastmodified` attribute is added to Algolia records to eliminate race condition issues related from the Cloud Function cold start.\n\n### Using the extension\n\nThis extension listens to the Cloud Firestore collection `users`. If you create, update, or delete a document within that collection, this extension will:\n\n- Indexes the document and send all the fields or configured fields defined in the extension.\n- or, removes the record from Algolia index if the document is deleted.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"algolia/firestore-algolia-search","extensionVersion":"1.2.7","systemParams":{"firebaseextensions.v1beta.function/minInstances":"0","firebaseextensions.v1beta.function/memory":"256","firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED"}},"lastOperationName":"projects/meloudy-96af8/operations/cd3b376d-cbaf-4877-ae48-cf18bf5242f3","serviceAccountEmail":"ext-firestore-algolia-sea-jmxs@meloudy-96af8.iam.gserviceaccount.com","lastOperationType":"CREATE","etag":"65e542901dc235ab1f884f64ade320fb45980f4903ee55bdffa6c39cd389a3f9","runtimeData":{"stateUpdateTime":"2024-12-13T06:01:22.526446238Z","processingState":{"state":"PROCESSING_COMPLETE","detailMessage":"Existing documents were not indexed because \"Indexing existing documents?\" is configured to false. If you want to run a full reindex, reconfigure this instance."}}}]}
[info] i  functions: Loaded environment variables from .env. 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged E:\Web\webportfolio\React\Nextext\nextext\functions (122.77 KB) for uploading 
[debug] [2025-02-17T09:41:31.552Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:31.552Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:31.552Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/meloudy-96af8/locations/-/functions [none]
[debug] [2025-02-17T09:41:33.457Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/meloudy-96af8/locations/-/functions 200
[debug] [2025-02-17T09:41:33.457Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/meloudy-96af8/locations/-/functions {"functions":[{"name":"projects/meloudy-96af8/locations/asia-northeast3/functions/ext-firestore-algolia-search-user-executeIndexOperation","description":"Firestore document-triggered function that creates, updates, or deletes data in Algolia.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/d6c31a7fd8927200a309842355f2b424db0cbdd4db82bac19514d2358a9726ee","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.write","resource":"projects/meloudy-96af8/databases/(default)/documents/users/{documentID}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"executeIndexOperation","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-algolia-sea-jmxs@meloudy-96af8.iam.gserviceaccount.com","updateTime":"2024-12-13T05:59:07.247Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-algolia-search-user","goog-firebase-ext":"firestore-algolia-search","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-algolia-search-user"},"environmentVariables":{"ALGOLIA_APP_ID":"6BVM9P8U9W","ALGOLIA_INDEX_NAME":"user_index","COLLECTION_PATH":"users","DATABASE_ID":"(default)","DATABASE_INSTANCE":"","DATABASE_URL":"","DO_FULL_INDEXING":"false","EXT_INSTANCE_ID":"firestore-algolia-search-user","FIELDS":"displayName,photoURL","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"databaseURL\":\"\",\"storageBucket\":\"meloudy-96af8.appspot.com\"}","FORCE_DATA_SYNC":"no","GCLOUD_PROJECT":"meloudy-96af8","LOCATION":"asia-northeast3","PROJECT_ID":"meloudy-96af8","STORAGE_BUCKET":"meloudy-96af8.appspot.com"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"677c5df6-6f95-4777-9193-50546ae88e3e","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"ALGOLIA_API_KEY","projectId":"640370611193","secret":"firestore-algolia-search-user-ALGOLIA_API_KEY","version":"1"}],"buildName":"projects/640370611193/locations/asia-northeast3/builds/677c5df6-6f95-4777-9193-50546ae88e3e","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com"},{"name":"projects/meloudy-96af8/locations/asia-northeast3/functions/ext-firestore-algolia-search-user-executeFullIndexOperation","description":"Loads all the data from your FireStore database into Algolia","sourceArchiveUrl":"gs://firebase-mod-sources-prod/d6c31a7fd8927200a309842355f2b424db0cbdd4db82bac19514d2358a9726ee","httpsTrigger":{"url":"https://asia-northeast3-meloudy-96af8.cloudfunctions.net/ext-firestore-algolia-search-user-executeFullIndexOperation","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"executeFullIndexOperation","timeout":"540s","availableMemoryMb":1024,"serviceAccountEmail":"ext-firestore-algolia-sea-jmxs@meloudy-96af8.iam.gserviceaccount.com","updateTime":"2024-12-13T05:58:47.904Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-algolia-search-user","goog-firebase-ext":"firestore-algolia-search","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-algolia-search-user"},"environmentVariables":{"ALGOLIA_APP_ID":"6BVM9P8U9W","ALGOLIA_INDEX_NAME":"user_index","COLLECTION_PATH":"users","DATABASE_ID":"(default)","DATABASE_INSTANCE":"","DATABASE_URL":"","DO_FULL_INDEXING":"false","EXT_INSTANCE_ID":"firestore-algolia-search-user","FIELDS":"displayName,photoURL","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"databaseURL\":\"\",\"storageBucket\":\"meloudy-96af8.appspot.com\"}","FORCE_DATA_SYNC":"no","GCLOUD_PROJECT":"meloudy-96af8","LOCATION":"asia-northeast3","PROJECT_ID":"meloudy-96af8","STORAGE_BUCKET":"meloudy-96af8.appspot.com"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"1445f42d-a7a6-4617-832c-c57a92ff126b","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"ALGOLIA_API_KEY","projectId":"640370611193","secret":"firestore-algolia-search-user-ALGOLIA_API_KEY","version":"1"}],"buildName":"projects/640370611193/locations/asia-northeast3/builds/1445f42d-a7a6-4617-832c-c57a92ff126b","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com"},{"name":"projects/meloudy-96af8/locations/asia-northeast3/functions/ext-firestore-algolia-search-executeFullIndexOperation","description":"Loads all the data from your FireStore database into Algolia","sourceArchiveUrl":"gs://firebase-mod-sources-prod/d6c31a7fd8927200a309842355f2b424db0cbdd4db82bac19514d2358a9726ee","httpsTrigger":{"url":"https://asia-northeast3-meloudy-96af8.cloudfunctions.net/ext-firestore-algolia-search-executeFullIndexOperation","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"executeFullIndexOperation","timeout":"540s","availableMemoryMb":1024,"serviceAccountEmail":"ext-firestore-algolia-search@meloudy-96af8.iam.gserviceaccount.com","updateTime":"2024-12-12T09:25:32.483Z","versionId":"2","labels":{"goog-dm":"firebase-ext-firestore-algolia-search","goog-firebase-ext":"firestore-algolia-search","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-algolia-search","firebase-extensions-ar":"enabled"},"environmentVariables":{"ALGOLIA_APP_ID":"6BVM9P8U9W","ALGOLIA_INDEX_NAME":"post_index","COLLECTION_PATH":"posts","DATABASE_ID":"(default)","DATABASE_INSTANCE":"","DATABASE_URL":"","DO_FULL_INDEXING":"false","EXT_INSTANCE_ID":"firestore-algolia-search","FIELDS":"title,userId,content,commentCount,images,tag,createAt","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"databaseURL\":\"\",\"storageBucket\":\"meloudy-96af8.appspot.com\"}","FORCE_DATA_SYNC":"yes","GCLOUD_PROJECT":"meloudy-96af8","LOCATION":"asia-northeast3","PROJECT_ID":"meloudy-96af8","STORAGE_BUCKET":"meloudy-96af8.appspot.com"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"82b0aa44-97d5-44e3-9313-c705c1f5cc2a","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"ALGOLIA_API_KEY","projectId":"640370611193","secret":"firestore-algolia-search-ALGOLIA_API_KEY-b9l1","version":"1"}],"buildName":"projects/640370611193/locations/asia-northeast3/builds/82b0aa44-97d5-44e3-9313-c705c1f5cc2a","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com"},{"name":"projects/meloudy-96af8/locations/asia-northeast3/functions/ext-firestore-algolia-search-executeIndexOperation","description":"Firestore document-triggered function that creates, updates, or deletes data in Algolia.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/d6c31a7fd8927200a309842355f2b424db0cbdd4db82bac19514d2358a9726ee","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.write","resource":"projects/meloudy-96af8/databases/(default)/documents/posts/{documentID}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"executeIndexOperation","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-algolia-search@meloudy-96af8.iam.gserviceaccount.com","updateTime":"2024-12-12T09:25:56.208Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-algolia-search","goog-firebase-ext":"firestore-algolia-search","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-algolia-search"},"environmentVariables":{"ALGOLIA_APP_ID":"6BVM9P8U9W","ALGOLIA_INDEX_NAME":"post_index","COLLECTION_PATH":"posts","DATABASE_ID":"(default)","DATABASE_INSTANCE":"","DATABASE_URL":"","DO_FULL_INDEXING":"false","EXT_INSTANCE_ID":"firestore-algolia-search","FIELDS":"title,userId,content,commentCount,images,tag,createAt","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"databaseURL\":\"\",\"storageBucket\":\"meloudy-96af8.appspot.com\"}","FORCE_DATA_SYNC":"yes","GCLOUD_PROJECT":"meloudy-96af8","LOCATION":"asia-northeast3","PROJECT_ID":"meloudy-96af8","STORAGE_BUCKET":"meloudy-96af8.appspot.com"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"e7bc2965-f79d-4a35-9cc0-ed81b7f3bdfc","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"ALGOLIA_API_KEY","projectId":"640370611193","secret":"firestore-algolia-search-ALGOLIA_API_KEY-b9l1","version":"1"}],"buildName":"projects/640370611193/locations/asia-northeast3/builds/e7bc2965-f79d-4a35-9cc0-ed81b7f3bdfc","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com"}]}
[debug] [2025-02-17T09:41:33.458Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:33.458Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:33.458Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-02-17T09:41:35.629Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/-/functions 200
[debug] [2025-02-17T09:41:35.629Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/-/functions {"functions":[{"name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"build":"projects/640370611193/locations/us-central1/builds/9808876f-61df-4945-ad95-845f5716a102","runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1735045802031962"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1735045802031962"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00021-hok","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"},{"attribute":"database","value":"(default)"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2024-12-24T13:10:11.469193944Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"43278ed99d781793018eb4563f7f0d6502f7353f"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","createTime":"2024-12-18T11:19:44.834814502Z","satisfiesPzi":true},{"name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"build":"projects/640370611193/locations/us-central1/builds/9808876f-61df-4945-ad95-845f5716a102","runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2024-12-24T13:10:05.219710719Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"43278ed99d781793018eb4563f7f0d6502f7353f"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","createTime":"2024-12-19T05:49:53.833817493Z","satisfiesPzi":true}]}
[debug] [2025-02-17T09:41:35.631Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:35.631Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:35.631Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:35.631Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:35.631Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) [none]
[debug] [2025-02-17T09:41:35.632Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) [none]
[debug] [2025-02-17T09:41:35.793Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) 200
[debug] [2025-02-17T09:41:35.793Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) {"name":"projects/meloudy-96af8/databases/(default)","uid":"864ffa35-cf63-40d9-9feb-563cc2abaef9","createTime":"2024-10-23T00:25:26.230211Z","updateTime":"2024-10-23T00:25:26.230211Z","locationId":"asia-northeast3","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-02-17T08:41:35.747274Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"v","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","etag":"INyrp6S1yosDMPGw4+eE2okD"}
[debug] [2025-02-17T09:41:35.865Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) 200
[debug] [2025-02-17T09:41:35.865Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) {"name":"projects/meloudy-96af8/databases/(default)","uid":"864ffa35-cf63-40d9-9feb-563cc2abaef9","createTime":"2024-10-23T00:25:26.230211Z","updateTime":"2024-10-23T00:25:26.230211Z","locationId":"asia-northeast3","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-02-17T08:41:35.819889Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"v","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","etag":"IP/lq6S1yosDMPGw4+eE2okD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-02-17T09:41:35.866Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:35.867Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-02-17T09:41:35.867Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:35.867Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-02-17T09:41:35.867Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:35.868Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-02-17T09:41:35.868Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:35.868Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:35.868Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/run.googleapis.com [none]
[debug] [2025-02-17T09:41:35.868Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/run.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:35.869Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/eventarc.googleapis.com [none]
[debug] [2025-02-17T09:41:35.869Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/eventarc.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:35.871Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/pubsub.googleapis.com [none]
[debug] [2025-02-17T09:41:35.871Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/pubsub.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:35.872Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/storage.googleapis.com [none]
[debug] [2025-02-17T09:41:35.872Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/storage.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:41:37.339Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/pubsub.googleapis.com 200
[debug] [2025-02-17T09:41:37.339Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-02-17T09:41:37.341Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/run.googleapis.com 200
[debug] [2025-02-17T09:41:37.341Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[debug] [2025-02-17T09:41:37.377Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/eventarc.googleapis.com 200
[debug] [2025-02-17T09:41:37.378Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[debug] [2025-02-17T09:41:37.410Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/storage.googleapis.com 200
[debug] [2025-02-17T09:41:37.410Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-02-17T09:41:37.411Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:37.411Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-02-17T09:41:37.411Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:37.411Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:37.412Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-02-17T09:41:37.412Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-02-17T09:41:38.012Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-02-17T09:41:38.012Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-640370611193@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"107075483169055343612"}}
[debug] [2025-02-17T09:41:38.748Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-02-17T09:41:38.748Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-640370611193@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"102571697287508757506"}}
[debug] [2025-02-17T09:41:38.750Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:38.750Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:38.750Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 [none]
[debug] [2025-02-17T09:41:39.900Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 200
[debug] [2025-02-17T09:41:39.900Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 {"projectNumber":"640370611193","projectId":"meloudy-96af8","lifecycleState":"ACTIVE","name":"Meloudy","labels":{"firebase":"enabled"},"createTime":"2024-10-21T22:24:57.261827Z"}
[debug] [2025-02-17T09:41:39.901Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:39.901Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:39.901Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/meloudy-96af8/billingInfo [none]
[debug] [2025-02-17T09:41:41.431Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/meloudy-96af8/billingInfo 200
[debug] [2025-02-17T09:41:41.431Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/meloudy-96af8/billingInfo {"name":"projects/meloudy-96af8/billingInfo","projectId":"meloudy-96af8","billingAccountName":"billingAccounts/01FFB0-CC6967-42D6E8","billingEnabled":true}
[debug] [2025-02-17T09:41:41.432Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:41.432Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:41.432Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-02-17T09:41:42.717Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-02-17T09:41:42.717Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/5a1978e6-510c-4f4b-b2bc-70a008841a8b.zip?GoogleAccessId=service-640370611193@gcf-admin-robot.iam.gserviceaccount.com&Expires=1739787102&Signature=N%2F%2FMUr2gfskN1SouL8gEZaTIS5F0h1GlaEuCBF1bjxPFbBzpDiwSBB7PdjC0gWUIPajXkY61dxnWO0JuICmu0KEecFu3cCbwXsxNnsQGZyjMfCAZplgdRRhBuL5pP9H5vZr0f97uTsnmUQpBkg5mhiSIHQpmMRNoGWq9yEP4m4e4lr68UXuoYr4kiQHfVs8tJdTHULB2r840pFtzDqBLm6Jrh8xfjAZ32CS2acWIh3k86MC1u8waHaOBaXjKbioNef0cmhdyxw1SC3Ii%2Fi4etl%2F45AH8ZAzlX%2FnU6s5YjVWlZAKLIK%2FA6Z%2BEtDaJcN7taGFbKsQb%2FqiPg0ePjspuGw%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com","object":"5a1978e6-510c-4f4b-b2bc-70a008841a8b.zip"}}
[debug] [2025-02-17T09:41:42.718Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/5a1978e6-510c-4f4b-b2bc-70a008841a8b.zip GoogleAccessId=service-640370611193%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1739787102&Signature=N%2F%2FMUr2gfskN1SouL8gEZaTIS5F0h1GlaEuCBF1bjxPFbBzpDiwSBB7PdjC0gWUIPajXkY61dxnWO0JuICmu0KEecFu3cCbwXsxNnsQGZyjMfCAZplgdRRhBuL5pP9H5vZr0f97uTsnmUQpBkg5mhiSIHQpmMRNoGWq9yEP4m4e4lr68UXuoYr4kiQHfVs8tJdTHULB2r840pFtzDqBLm6Jrh8xfjAZ32CS2acWIh3k86MC1u8waHaOBaXjKbioNef0cmhdyxw1SC3Ii%2Fi4etl%2F45AH8ZAzlX%2FnU6s5YjVWlZAKLIK%2FA6Z%2BEtDaJcN7taGFbKsQb%2FqiPg0ePjspuGw%3D%3D
[debug] [2025-02-17T09:41:42.718Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/5a1978e6-510c-4f4b-b2bc-70a008841a8b.zip [stream]
[debug] [2025-02-17T09:41:43.784Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/5a1978e6-510c-4f4b-b2bc-70a008841a8b.zip 200
[debug] [2025-02-17T09:41:43.784Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/5a1978e6-510c-4f4b-b2bc-70a008841a8b.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function setHasUpdateCommentFlag(us-central1)... 
[info] i  functions: updating Node.js 18 (2nd Gen) function setHasUpdateFlag(us-central1)... 
[debug] [2025-02-17T09:41:43.790Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:43.790Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:43.790Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion%2CbuildConfig.buildEnvironmentVariables
[debug] [2025-02-17T09:41:43.790Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag {"name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com","object":"5a1978e6-510c-4f4b-b2bc-70a008841a8b.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"triggerRegion":"asia-northeast3"}}
[debug] [2025-02-17T09:41:47.036Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag 200
[debug] [2025-02-17T09:41:47.036Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-02-17T09:41:47.036Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:47.036Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:47.036Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:41:48.107Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:41:48.107Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:41:48.616Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:41:48.616Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:48.616Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:48.616Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:41:49.732Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:41:49.732Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:41:50.739Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:41:50.739Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:50.739Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:50.739Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:41:51.811Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:41:51.811Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:41:53.820Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:41:53.820Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:53.820Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:53.820Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:41:54.888Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:41:54.889Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:41:58.895Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:41:58.895Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:58.895Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:41:58.895Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:41:59.960Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:41:59.960Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:42:07.961Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:42:07.961Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:07.961Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:07.962Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:42:09.161Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:42:09.162Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:42:19.163Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:42:19.163Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:19.163Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:19.163Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:42:20.389Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:42:20.389Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:42:30.389Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:42:30.390Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:30.390Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:30.390Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:42:31.687Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:42:31.687Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:42:41.702Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:42:41.702Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:41.702Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:41.702Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:42:42.903Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:42:42.903Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:42:52.904Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:42:52.905Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:52.905Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:42:52.905Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:42:54.169Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:42:54.170Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:43:04.178Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:43:04.178Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:04.178Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:04.178Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:43:05.424Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:43:05.424Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/ab6dccf8-9203-4417-8279-8dae4ba822fa?project=640370611193"},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdatecommentflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:43:05.424Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2025-02-17T09:43:05.424Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:05.424Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:05.424Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion%2CbuildConfig.buildEnvironmentVariables
[debug] [2025-02-17T09:43:05.424Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag {"name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com","object":"5a1978e6-510c-4f4b-b2bc-70a008841a8b.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ=="},"serviceConfig":{"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"triggerRegion":"asia-northeast3"}}
[debug] [2025-02-17T09:43:08.613Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag 200
[debug] [2025-02-17T09:43:08.613Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:43:08.429482284Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-02-17T09:43:08.613Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:08.613Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:08.613Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c [none]
[debug] [2025-02-17T09:43:08.888Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c 200
[debug] [2025-02-17T09:43:08.888Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:43:08.429482284Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785388350985"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1735045802031962"}},"dockerRegistry":"ARTIFACT_REGISTRY","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00021-hok","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","state":"NOT_STARTED","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION"},"done":false}
[debug] [2025-02-17T09:43:08.889Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2025-02-17T09:43:09.395Z] [update-default-us-central1-setHasUpdateFlag] Retrying task index 0
[debug] [2025-02-17T09:43:09.395Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:09.395Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:09.396Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c [none]
[debug] [2025-02-17T09:43:10.498Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c 200
[debug] [2025-02-17T09:43:10.498Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:43:08.429482284Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785388350985"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1735045802031962"}},"dockerRegistry":"ARTIFACT_REGISTRY","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00021-hok","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Reusing build","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdateflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:43:10.498Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2025-02-17T09:43:11.503Z] [update-default-us-central1-setHasUpdateFlag] Retrying task index 0
[debug] [2025-02-17T09:43:11.503Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:11.503Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:11.504Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c [none]
[debug] [2025-02-17T09:43:12.616Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c 200
[debug] [2025-02-17T09:43:12.617Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:43:08.429482284Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785388350985"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1735045802031962"}},"dockerRegistry":"ARTIFACT_REGISTRY","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00021-hok","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Reusing build","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdateflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:43:12.617Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2025-02-17T09:43:14.628Z] [update-default-us-central1-setHasUpdateFlag] Retrying task index 0
[debug] [2025-02-17T09:43:14.628Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:14.628Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:14.629Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c [none]
[debug] [2025-02-17T09:43:15.425Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:43:15.425Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:15.426Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:15.426Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec [none]
[debug] [2025-02-17T09:43:15.687Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c 200
[debug] [2025-02-17T09:43:15.687Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:43:08.429482284Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785388350985"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1735045802031962"}},"dockerRegistry":"ARTIFACT_REGISTRY","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00021-hok","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Reusing build","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdateflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:43:15.687Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2025-02-17T09:43:16.632Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec 200
[debug] [2025-02-17T09:43:16.632Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785304700-62e5355127684-df9bd768-29a791ec","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:41:46.849339940Z","endTime":"2025-02-17T09:43:09.630691550Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1735045753589190"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00019-wuz","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Could not create or update Cloud Run service sethasupdatecommentflag, Container Healthcheck failed. Revision 'sethasupdatecommentflag-00020-jab' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdatecommentflag/revision_name/sethasupdatecommentflag-00020-jab&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdatecommentflag%22%0Aresource.labels.revision_name%3D%22sethasupdatecommentflag-00020-jab%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"}}
[debug] [2025-02-17T09:43:16.632Z] Got source token undefined for region us-central1
[error] Could not create or update Cloud Run service sethasupdatecommentflag, Container Healthcheck failed. Revision 'sethasupdatecommentflag-00020-jab' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.

Logs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdatecommentflag/revision_name/sethasupdatecommentflag-00020-jab&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdatecommentflag%22%0Aresource.labels.revision_name%3D%22sethasupdatecommentflag-00020-jab%22 
For more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start
[debug] [2025-02-17T09:43:19.695Z] [update-default-us-central1-setHasUpdateFlag] Retrying task index 0
[debug] [2025-02-17T09:43:19.696Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:19.696Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:19.696Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c [none]
[debug] [2025-02-17T09:43:20.744Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c 200
[debug] [2025-02-17T09:43:20.744Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:43:08.429482284Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785388350985"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1735045802031962"}},"dockerRegistry":"ARTIFACT_REGISTRY","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00021-hok","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Reusing build","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdateflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:43:20.744Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2025-02-17T09:43:28.750Z] [update-default-us-central1-setHasUpdateFlag] Retrying task index 0
[debug] [2025-02-17T09:43:28.751Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:28.751Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:28.751Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c [none]
[debug] [2025-02-17T09:43:30.004Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c 200
[debug] [2025-02-17T09:43:30.004Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:43:08.429482284Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785388350985"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1735045802031962"}},"dockerRegistry":"ARTIFACT_REGISTRY","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00021-hok","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Reusing build","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdateflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa"},"done":false}
[debug] [2025-02-17T09:43:30.004Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ== for region us-central1
[debug] [2025-02-17T09:43:40.036Z] [update-default-us-central1-setHasUpdateFlag] Retrying task index 0
[debug] [2025-02-17T09:43:40.036Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:40.036Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:40.036Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c [none]
[debug] [2025-02-17T09:43:41.252Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c 200
[debug] [2025-02-17T09:43:41.252Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785386329-62e5359f003f1-32f3c093-59bf603c","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:43:08.429482284Z","endTime":"2025-02-17T09:43:35.149193984Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785388350985"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1735045802031962"}},"dockerRegistry":"ARTIFACT_REGISTRY","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy9hYjZkY2NmOC05MjAzLTQ0MTctODI3OS04ZGFlNGJhODIyZmESenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgsIpInMvQYQgM/MTTIIbm9kZWpzMTg6dgojZ2NyLmlvL2dhZS1ydW50aW1lcy9ub2RlanMxODpzdGFibGUST3VzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L3NlcnZlcmxlc3MtcnVudGltZXMvZ29vZ2xlLTIyLWZ1bGwvcnVudGltZXMvbm9kZWpzMThAAQ==","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00021-hok","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Could not create or update Cloud Run service sethasupdateflag, Container Healthcheck failed. Revision 'sethasupdateflag-00022-fep' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdateflag/revision_name/sethasupdateflag-00022-fep&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdateflag%22%0Aresource.labels.revision_name%3D%22sethasupdateflag-00022-fep%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"}}
[debug] [2025-02-17T09:43:41.252Z] Got source token undefined for region us-central1
[error] Could not create or update Cloud Run service sethasupdateflag, Container Healthcheck failed. Revision 'sethasupdateflag-00022-fep' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.

Logs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdateflag/revision_name/sethasupdateflag-00022-fep&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdateflag%22%0Aresource.labels.revision_name%3D%22sethasupdateflag-00022-fep%22 
For more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start
[debug] [2025-02-17T09:43:41.263Z] Total Function Deployment time: 117467
[debug] [2025-02-17T09:43:41.263Z] 2 Functions Deployed
[debug] [2025-02-17T09:43:41.263Z] 2 Functions Errored
[debug] [2025-02-17T09:43:41.263Z] 0 Function Deployments Aborted
[debug] [2025-02-17T09:43:41.263Z] Average Function Deployment time: 105155
[info] 
[info] Functions deploy had errors with the following functions:
	setHasUpdateCommentFlag(us-central1)
	setHasUpdateFlag(us-central1)
[info] i  functions: cleaning up build files... 
[debug] [2025-02-17T09:43:41.582Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:41.582Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:41.582Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:41.582Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:41.583Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:41.583Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:41.583Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_comment_flag [none]
[debug] [2025-02-17T09:43:41.584Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_flag [none]
[debug] [2025-02-17T09:43:41.584Z] >>> [apiv2][query] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list [none]
[debug] [2025-02-17T09:43:42.245Z] <<< [apiv2][status] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list 404
[debug] [2025-02-17T09:43:42.246Z] <<< [apiv2][body] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2025-02-17T09:43:42.246Z] Failed docker command with error  Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2025-02-17T09:43:42.257Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:42.258Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:42.258Z] >>> [apiv2][query] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list [none]
[debug] [2025-02-17T09:43:42.533Z] <<< [apiv2][status] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list 404
[debug] [2025-02-17T09:43:42.534Z] <<< [apiv2][body] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2025-02-17T09:43:42.534Z] Failed docker command with error  Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2025-02-17T09:43:42.637Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:42.638Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:43:42.638Z] >>> [apiv2][query] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list [none]
[debug] [2025-02-17T09:43:42.901Z] <<< [apiv2][status] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list 404
[debug] [2025-02-17T09:43:42.901Z] <<< [apiv2][body] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2025-02-17T09:43:42.901Z] Failed docker command with error  Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2025-02-17T09:43:42.945Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_comment_flag 404
[debug] [2025-02-17T09:43:42.945Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_comment_flag {"error":{"code":404,"message":"Package \"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_comment_flag\" was not found.","status":"NOT_FOUND"}}
[debug] [2025-02-17T09:43:42.958Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_flag 404
[debug] [2025-02-17T09:43:42.959Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_flag {"error":{"code":404,"message":"Package \"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_flag\" was not found.","status":"NOT_FOUND"}}
[warn] !  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/meloudy-96af8/us/gcf 
[debug] [2025-02-17T09:43:42.959Z] Functions deploy failed.
[debug] [2025-02-17T09:43:42.959Z] {
  "endpoint": {
    "id": "setHasUpdateCommentFlag",
    "project": "meloudy-96af8",
    "region": "us-central1",
    "entryPoint": "setHasUpdateCommentFlag",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "posts/{postId}/comments/{commentId}"
      },
      "region": "asia-northeast3"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "API_URL": "https://<region>-<meloudy-96af8>.cloudfunctions.net/api/",
      "REDIS_HOST": "127.0.0.1",
      "REDIS_PORT": "6379",
      "REDIS_PASSWORD": "sim0408sik",
      "FIREBASE_CONFIG": "{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}",
      "GCLOUD_PROJECT": "meloudy-96af8",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag"
    },
    "codebase": "default",
    "runServiceId": "sethasupdatecommentflag",
    "cpu": 1,
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Could not create or update Cloud Run service sethasupdatecommentflag, Container Healthcheck failed. Revision 'sethasupdatecommentflag-00020-jab' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdatecommentflag/revision_name/sethasupdatecommentflag-00020-jab&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdatecommentflag%22%0Aresource.labels.revision_name%3D%22sethasupdatecommentflag-00020-jab%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start",
    "original": {
      "code": 3,
      "message": "Could not create or update Cloud Run service sethasupdatecommentflag, Container Healthcheck failed. Revision 'sethasupdatecommentflag-00020-jab' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdatecommentflag/revision_name/sethasupdatecommentflag-00020-jab&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdatecommentflag%22%0Aresource.labels.revision_name%3D%22sethasupdatecommentflag-00020-jab%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-02-17T09:43:42.959Z] {
  "endpoint": {
    "id": "setHasUpdateFlag",
    "project": "meloudy-96af8",
    "region": "us-central1",
    "entryPoint": "setHasUpdateFlag",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "posts/{postId}"
      },
      "region": "asia-northeast3"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "API_URL": "https://<region>-<meloudy-96af8>.cloudfunctions.net/api/",
      "REDIS_HOST": "127.0.0.1",
      "REDIS_PORT": "6379",
      "REDIS_PASSWORD": "sim0408sik",
      "FIREBASE_CONFIG": "{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}",
      "GCLOUD_PROJECT": "meloudy-96af8",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag"
    },
    "codebase": "default",
    "runServiceId": "sethasupdateflag",
    "cpu": 1,
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Could not create or update Cloud Run service sethasupdateflag, Container Healthcheck failed. Revision 'sethasupdateflag-00022-fep' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdateflag/revision_name/sethasupdateflag-00022-fep&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdateflag%22%0Aresource.labels.revision_name%3D%22sethasupdateflag-00022-fep%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start",
    "original": {
      "code": 3,
      "message": "Could not create or update Cloud Run service sethasupdateflag, Container Healthcheck failed. Revision 'sethasupdateflag-00022-fep' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdateflag/revision_name/sethasupdateflag-00022-fep&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdateflag%22%0Aresource.labels.revision_name%3D%22sethasupdateflag-00022-fep%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"
    },
    "status": 3,
    "code": 3
  }
}
[error] Error: There was an error deploying functions:
[error] - Error Failed to update function setHasUpdateCommentFlag in region us-central1
[error] - Error Failed to update function setHasUpdateFlag in region us-central1
[debug] [2025-02-17T09:47:22.687Z] ----------------------------------------------------------------------
[debug] [2025-02-17T09:47:22.692Z] Command:       E:\Node\node.exe C:\Users\PC\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-02-17T09:47:22.692Z] CLI Version:   13.29.1
[debug] [2025-02-17T09:47:22.692Z] Platform:      win32
[debug] [2025-02-17T09:47:22.693Z] Node Version:  v22.1.0
[debug] [2025-02-17T09:47:22.693Z] Time:          Mon Feb 17 2025 18:47:22 GMT+0900 (대한민국 표준시)
[debug] [2025-02-17T09:47:22.693Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-02-17T09:47:22.789Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-02-17T09:47:22.789Z] > authorizing via signed-in user (simjsik75@gmail.com)
[debug] [2025-02-17T09:47:22.790Z] [iam] checking project meloudy-96af8 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-02-17T09:47:22.791Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:22.792Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:22.793Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions [none]
[debug] [2025-02-17T09:47:22.793Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:47:22.793Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-02-17T09:47:24.006Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions 200
[debug] [2025-02-17T09:47:24.006Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-02-17T09:47:24.006Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:24.006Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:24.006Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/meloudy-96af8/serviceAccounts/meloudy-96af8@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-02-17T09:47:24.006Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/meloudy-96af8/serviceAccounts/meloudy-96af8@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-02-17T09:47:25.516Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/meloudy-96af8/serviceAccounts/meloudy-96af8@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-02-17T09:47:25.516Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/meloudy-96af8/serviceAccounts/meloudy-96af8@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'meloudy-96af8'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] +  functions: Finished running predeploy script. 
[debug] [2025-02-17T09:47:51.137Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:51.137Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:51.137Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 [none]
[debug] [2025-02-17T09:47:52.257Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 200
[debug] [2025-02-17T09:47:52.257Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 {"projectNumber":"640370611193","projectId":"meloudy-96af8","lifecycleState":"ACTIVE","name":"Meloudy","labels":{"firebase":"enabled"},"createTime":"2024-10-21T22:24:57.261827Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-02-17T09:47:52.259Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:52.259Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:52.259Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:52.259Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-02-17T09:47:52.260Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:52.260Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-02-17T09:47:52.260Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:52.260Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:52.261Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudfunctions.googleapis.com [none]
[debug] [2025-02-17T09:47:52.261Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:47:52.262Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/runtimeconfig.googleapis.com [none]
[debug] [2025-02-17T09:47:52.262Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:47:52.263Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudbuild.googleapis.com [none]
[debug] [2025-02-17T09:47:52.263Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudbuild.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:47:52.264Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/artifactregistry.googleapis.com [none]
[debug] [2025-02-17T09:47:52.264Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/artifactregistry.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:47:53.774Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/runtimeconfig.googleapis.com 200
[debug] [2025-02-17T09:47:53.774Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-02-17T09:47:53.792Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudfunctions.googleapis.com 200
[debug] [2025-02-17T09:47:53.792Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-02-17T09:47:53.794Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudbuild.googleapis.com 200
[debug] [2025-02-17T09:47:53.794Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-02-17T09:47:53.795Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/artifactregistry.googleapis.com 200
[debug] [2025-02-17T09:47:53.795Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-02-17T09:47:53.796Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:53.796Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:53.796Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/meloudy-96af8/adminSdkConfig [none]
[debug] [2025-02-17T09:47:54.952Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/meloudy-96af8/adminSdkConfig 200
[debug] [2025-02-17T09:47:54.953Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/meloudy-96af8/adminSdkConfig {"projectId":"meloudy-96af8","storageBucket":"meloudy-96af8.appspot.com","locationId":"asia-northeast3"}
[debug] [2025-02-17T09:47:54.953Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:54.953Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:54.953Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs [none]
[debug] [2025-02-17T09:47:55.455Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs 200
[debug] [2025-02-17T09:47:55.455Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs {"configs":[{"name":"projects/meloudy-96af8/configs/apienv"}]}
[debug] [2025-02-17T09:47:55.455Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:55.456Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:55.456Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables [none]
[debug] [2025-02-17T09:47:55.773Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables 200
[debug] [2025-02-17T09:47:55.774Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables {"variables":[{"name":"projects/meloudy-96af8/configs/apienv/variables/base_api_url","updateTime":"2025-02-17T08:48:45.387708371Z"}]}
[debug] [2025-02-17T09:47:55.774Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:55.774Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:47:55.774Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables/base_api_url [none]
[debug] [2025-02-17T09:47:56.075Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables/base_api_url 200
[debug] [2025-02-17T09:47:56.075Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/meloudy-96af8/configs/apienv/variables/base_api_url {"name":"projects/meloudy-96af8/configs/apienv/variables/base_api_url","updateTime":"2025-02-17T08:48:45.387708371Z","text":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/"}
[debug] [2025-02-17T09:47:56.077Z] Validating nodejs source
[warn] !  functions: Runtime Node.js 18 will be deprecated on 2025-04-30 and will be decommissioned on 2025-10-31, after which you will not be able to deploy without upgrading. Consider upgrading now to avoid disruption. See https://cloud.google.com/functions/docs/runtime-support for full details on the lifecycle policy 
[warn] !  functions: package.json indicates an outdated version of firebase-functions. Please upgrade using npm install --save firebase-functions@latest in your functions directory. 
[debug] [2025-02-17T09:47:58.424Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build": "tsc",
    "build:watch": "tsc --watch",
    "serve": "npm run build && firebase emulators:start --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@types/cookie-parser": "^1.4.8",
    "cookie-parser": "^1.4.7",
    "express": "^4.21.2",
    "firebase-admin": "^12.6.0",
    "firebase-functions": "^6.0.1"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.12.0",
    "@typescript-eslint/parser": "^5.12.0",
    "eslint": "^8.57.1",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "typescript": "^4.9.0"
  },
  "private": true
}
[debug] [2025-02-17T09:47:58.425Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-02-17T09:47:58.426Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-02-17T09:47:58.435Z] Found firebase-functions binary at 'E:\Web\webportfolio\React\Nextext\nextext\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8330

[error] (node:23296) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2025-02-17T09:48:02.796Z] Got response from /__/functions.yaml {"endpoints":{"setHasUpdateCommentFlag":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"posts/{postId}/comments/{commentId}"},"retry":false},"entryPoint":"setHasUpdateCommentFlag"},"setHasUpdateFlag":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","eventFilters":{"database":"(default)","namespace":"(default)"},"eventFilterPathPatterns":{"document":"posts/{postId}"},"retry":false},"entryPoint":"setHasUpdateFlag"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[error] Redis 연결 실패: Error: connect ECONNREFUSED 127.0.0.1:6379
    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1606:16) {
  errno: -4078,
  code: 'ECONNREFUSED',
  syscall: 'connect',
  address: '127.0.0.1',
  port: 6379
}

[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-02-17T09:48:07.850Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:07.850Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:07.850Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/firebaseextensions.googleapis.com [none]
[debug] [2025-02-17T09:48:07.851Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:48:09.323Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/firebaseextensions.googleapis.com 200
[debug] [2025-02-17T09:48:09.323Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-02-17T09:48:09.324Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-02-17T09:48:09.324Z] > authorizing via signed-in user (simjsik75@gmail.com)
[debug] [2025-02-17T09:48:09.324Z] [iam] checking project meloudy-96af8 for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-02-17T09:48:09.324Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:09.324Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:09.324Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions [none]
[debug] [2025-02-17T09:48:09.324Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:48:09.324Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-02-17T09:48:10.354Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions 200
[debug] [2025-02-17T09:48:10.354Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-02-17T09:48:10.355Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:10.355Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:10.355Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/meloudy-96af8/instances pageSize=100&pageToken=
[debug] [2025-02-17T09:48:11.718Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/meloudy-96af8/instances 200
[debug] [2025-02-17T09:48:11.719Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/meloudy-96af8/instances {"instances":[{"name":"projects/meloudy-96af8/instances/firestore-algolia-search","createTime":"2024-12-12T07:57:23.836392Z","updateTime":"2024-12-12T09:26:08.500521Z","state":"ACTIVE","config":{"name":"projects/meloudy-96af8/instances/firestore-algolia-search/configurations/088d58cd-6237-4162-8d89-64cc49214874","createTime":"2024-12-12T09:20:59.879001Z","source":{"name":"projects/algolia-b2ebc/sources/a9ff9aba-022b-44af-83ef-04c8d1b85593","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/algolia-firestore-algolia-search-1.2.7-45aa5447-9f8b-46a6-95b9-5f7dbe3bda66.zip","hash":"9151b4368a9a5cee01940524e2c13b71929d366153f5cbd944edeb5c787b52c4","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"firestore-algolia-search","version":"1.2.7","description":"Enables full text search of your Cloud Firestore data with Algolia.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read."}],"resources":[{"name":"executeIndexOperation","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/${DATABASE_ID}/documents/${COLLECTION_PATH}/{documentID}\nlocation: ${LOCATION}\nruntime: nodejs18\n","description":"Firestore document-triggered function that creates, updates, or deletes data in Algolia.","deletionPolicy":"DELETE"},{"name":"executeFullIndexOperation","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nlocation: ${param:LOCATION}\nruntime: nodejs18\ntaskQueueTrigger: {}\ntimeout: 540s\n","description":"Loads all the data from your FireStore database into Algolia","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Algolia","url":"https://algolia.com"},"contributors":[{"authorName":"Sajid Momin","email":"sajid.momin@algolia.com","url":"https://github.com/smomin"}],"license":"Apache-2.0","sourceUrl":"https://github.com/algolia/firestore-algolia-search/tree/main","params":[{"param":"DATABASE_ID","label":"Database ID","type":"STRING","description":"Enter database that contains the collections that you want to monitor?\n","required":true,"default":"(default)","example":"test","immutable":true},{"param":"COLLECTION_PATH","label":"Collection Path","type":"STRING","description":"What is the path to the Cloud Firestore collection where the extension should monitor for changes?\n","required":true,"example":"store","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Firestore collection paths must be an odd number of segments separated by slashes, e.g. \"movies/{id}/actors\".","immutable":true},{"param":"FIELDS","label":"Indexable Fields","type":"STRING","description":"This can be a comma separated list or left blank to index all fields. For performance reasons, [record size is limited](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/in-depth/index-and-records-size-and-usage-limitations/#record-size-limits). If you're receiving errors that your records are too large, refer to the [reducing record size documentation](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/how-to/reducing-object-size/).\n","example":"name,category,price,sales"},{"param":"FORCE_DATA_SYNC","label":"Force Data Sync","type":"SELECT","description":"The extension uses approaches to mitigate race conditions but it might not be a 100% fool proof.  This setting will make sure the function is using the latest data from Firestore by making another read call before processing and sending to Algolia.  note: This will be a add to your usage of Firestore.","options":[{"value":"no","label":"No"},{"value":"yes","label":"Yes"}],"default":"no"},{"param":"ALGOLIA_INDEX_NAME","label":"Algolia Index Name","type":"STRING","description":"This is the name of the [Algolia index](https://www.algolia.com/doc/faq/basics/what-is-an-index/) where the records will be persisted. Refer to [naming your index](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#naming-your-index) for more information.","required":true},{"param":"ALGOLIA_APP_ID","label":"Algolia Application Id","type":"STRING","description":"This is the Algolia application you want to index your data to. You can find your credentials including application ID on your Algolia dashboard, under the [API keys tab](https://www.algolia.com/api-keys).","required":true},{"param":"ALGOLIA_API_KEY","label":"Algolia API Key","type":"SECRET","description":"We recommend [creating a new API key](https://www.algolia.com/doc/guides/security/api-keys/#creating-and-managing-api-keys) with \"addObject\", \"deleteObject\", \"listIndexes\", \"deleteIndex\", \"editSettings\", and \"settings\" permissions. **Do not use the Admin API key**.","required":true},{"param":"ALT_OBJECT_ID","label":"Alternative Object Id","type":"STRING","description":"Specify an alternative Firestore document property to use for the Algolia record Id.  Use `(path)` if the document path is desired as the Algolia ObjectID.  The default is the Firestore document Id. **If you set this property, make sure to clear out the Algolia Index since the ObjectID will be different resulting in duplicate records.**"},{"param":"TRANSFORM_FUNCTION","label":"Transform Function Name (Experimental)","type":"STRING","description":"Specify a Firebase Cloud Function for any data transformation before saving into Algolia. Refer to [Call functions for your app](https://firebase.google.com/docs/functions/callable)."},{"param":"DO_FULL_INDEXING","label":"Full Index existing documents?","type":"SELECT","description":"Should existing documents in the Firestore collection be indexed as well?\n","required":true,"options":[{"value":"true","label":"Yes"},{"value":"false","label":"No"}]},{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"immutable":true}],"preinstallContent":"Use this extension to index your Cloud Firestore data to Algolia and keep it synced.  The extension is applied and configured on a Firestore [collection](https://firebase.google.com/docs/firestore/data-model#collections).\n\nThis extension listens for changes on the specified collection. If you add a [document](https://firebase.google.com/docs/firestore/data-model#documents), the extension indexes it as a [record in Algolia](https://www.algolia.com/doc/faq/basics/what-is-a-record/). The extension only indexes the fields defined in the extension configuration and uses the [document Id](https://firebase.google.com/docs/firestore/manage-data/add-data#add_a_document) as the Algolia [object Id](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#using-unique-object-identifiers).\n\nAnytime you update a document, the extension propagates the update to the corresponding Algolia record. If you delete a document, the extension removes the corresponding Algolia record.\n\n#### Important\n\nUpon installation or when the extension's configuration is changed, the documents in the specified collection will be synced to Algolia.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've\n[set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart)\nin your Firebase project.\n\nYou must also have an Algolia account set up before installing this\nextension. You can do so on the [Algolia](https://www.algolia.com/) site.\n\n#### Billing\n\nThis extension uses the following Firebase services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nThis extension also uses the following third-party services:\n\n- Algolia ([pricing information](https://www.algolia.com/pricing))\n\nYou are responsible for any costs associated with your use of these services.\n\n#### Note from Firebase\n\nTo install this extension, your Firebase project must be on the Blaze (pay-as-you-go) plan. You will only be charged for the resources you use. Most Firebase services offer a free tier for low-volume use. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nYou will be billed a small amount (typically less than $0.10) when you install or reconfigure this extension. See Cloud Functions under [Firebase Pricing](https://firebase.google.com/pricing) for a detailed explanation.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to the [Cloud Firestore tab](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't exist already, create a collection called `${param:COLLECTION_PATH}`.\n\n1.  Create, update, or delete a document in the `${param:COLLECTION_PATH}` collection.  Go to Algolia's dashboard and verify in Algolia that a record is created, updated, or deleted in the `${param:ALGOLIA_INDEX_NAME}` index for application id `${param:ALGOLIA_APP_ID}`.\n\n### Collection import\n\nIf the collection named `${param:COLLECTION_PATH}` exists, the extension has begun importing documents into the `${param:ALGOLIA_INDEX_NAME}` Algolia Index. Additionally, a full reindex will occur each time the extension's configuration changes.\n\nA `lastmodified` attribute is added to Algolia records to eliminate race condition issues related from the Cloud Function cold start.\n\n### Using the extension\n\nThis extension listens to the Cloud Firestore collection `${param:COLLECTION_PATH}`. If you create, update, or delete a document within that collection, this extension will:\n\n- Indexes the document and send all the fields or configured fields defined in the extension.\n- or, removes the record from Algolia index if the document is deleted.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Search Firestore with Algolia\n\n**Author**: Algolia (**[https://www.algolia.com](https://www.algolia.com)**)\n\n**Description**: Enable full text search of your Cloud Firestore data with Algolia.\n\n**Details**: Use this extension to index your Cloud Firestore data to [Algolia](https://www.algolia.com/doc/) and keep it synced.\n\nYou can then [configure your relevance](/doc/guides/getting-started/how-algolia-works/in-depth/implementation-process/#configuring-relevance) using the [Algolia dashboard](https://www.algolia.com/dashboard) or [API clients](/doc/api-client/getting-started/install/javascript/). From there, you can use Algolia's [front-end libraries](/doc/guides/building-search-ui/what-is-instantsearch/js/) to incorporate search components into your Firebase app's UI.\n\n---\n\nWe welcome [bug reports and feature requests](https://github.com/algolia/firestore-algolia-search/issues/new) as well as pull requests in this GitHub repository.\n\n### Firebase CLI\n\n```bash\nfirebase ext:install algolia/firestore-algolia-search --project=<your-project-id>\n```\n\n> Learn more about installing extensions in the Firebase Extensions documentation: [console](https://firebase.google.com/docs/extensions/install-extensions?platform=console), [CLI](https://firebase.google.com/docs/extensions/install-extensions?platform=cli)\n\n---\n\n#### Details\n\nUse this extension to index your Cloud Firestore data to Algolia and keep it synced.  The extension is applied and configured on a Firestore [collection](https://firebase.google.com/docs/firestore/data-model#collections) or [subcollection](https://firebase.google.com/docs/firestore/data-model#subcollections).\n\nThis extension listens for changes on the specified collection. If you add a [document](https://firebase.google.com/docs/firestore/data-model#documents), the extension indexes it as a [record in Algolia](https://www.algolia.com/doc/faq/basics/what-is-a-record/). The extension only indexes the fields defined in the extension configuration and uses the [document Id](https://firebase.google.com/docs/firestore/manage-data/add-data#add_a_document) as the Algolia [object Id](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#using-unique-object-identifiers).\n\nAnytime you update a document, the extension propagates the update to the corresponding Algolia record. If you delete a document, the extension removes the corresponding Algolia record.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've set up:\n- [Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n- [Algolia](https://www.algolia.com/) account.\n\n\n#### Billing\n\nThis extension uses the following Firebase services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nThis extension also uses the following third-party services:\n\n- Algolia ([pricing information](https://www.algolia.com/pricing))\n\nYou are responsible for any costs associated with your use of these services.\n\n#### Note from Firebase\n\nTo install this extension, your Firebase project must be on the Blaze (pay-as-you-go) plan. You will only be charged for the resources you use. Most Firebase services offer a free tier for low-volume use. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nYou will be billed a small amount (typically less than $0.10) when you install or reconfigure this extension. See Cloud Functions under [Firebase Pricing](https://firebase.google.com/pricing) for a detailed explanation.\n\n#### Configuration Parameters\n\nCloud Functions Location: Where do you want to deploy the functions created for this extension?\n  You usually want a location close to your database.\n  For help selecting a location, refer to the\n  [location selection guide](https://firebase.google.com/docs/functions/locations).\n- Database Id: Enter the database id that contains the collection(s) that you want to monitor?\n  Firebase supports [multiple databases](https://cloud.google.com/blog/products/databases/manage-multiple-firestore-databases-in-a-project) in a project.  In order to use a non default database, enter the database Id.\n\n- Collection Path: What is the path to the Cloud Firestore collection where the extension should monitor for changes?\n  For subcollection, the syntax is `parent_collection/{parentId}/target_collection`. (please note, there is not depublication process on subcollections).\n\n- Fields: What document fields should be indexed to provide the best search experience? For more information on which fields to index to Algolia, see the [Algolia documentation on records](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/#algolia-records).\n  This can be a comma separated list or left blank to index all fields.\n  For performance reasons, [record size is limited](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/in-depth/index-and-records-size-and-usage-limitations/#record-size-limits).\n  If you're receiving errors that your records are too large, refer to the [reducing record size documentation](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/how-to/reducing-object-size/).\n\n- Force Data Sync: Are you facing data inconsistent issues possibly due to race conditions?\n  This setting will make sure the function is using the latest data from Firestore by making another read call before processing and sending to Algolia.\n\n- Algolia Application ID: What is the Algolia Application Id?\n  This is the Algolia application you want to index your data to.\n  You can find your credentials including application ID on your Algolia dashboard,\n  under the [API keys tab](https://www.algolia.com/api-keys).\n\n- Algolia API Key: What is your Algolia API key?\n  We recommend [creating a new API key](https://www.algolia.com/doc/guides/security/api-keys/#creating-and-managing-api-keys)\n  with \"addObject\", \"deleteObject\", \"listIndexes\", \"deleteIndex\", \"editSettings\", and \"settings\" permissions.\n  **Do not use the Admin API key**.\n\n- Algolia Index Name: What is the Algolia index name?\n  This is the name of the [Algolia index](https://www.algolia.com/doc/faq/basics/what-is-an-index/)\n  where the records will be persisted.\n  Refer to [naming your index](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#naming-your-index) for more information.\n\n- Alternative Object Id: Are you looking to use another Firestore document property or document path as the Algolia ObjectID?\n  Specify an alternative Firestore document property to use for the Algolia record Id.  Use `(path)` if the document path is desired as the Algolia ObjectID.  The default is the Firestore document Id.\n  **If you set this property, make sure to clear out the Algolia Index since the ObjectID will be different resulting in duplicate records.**\n\n- Transform Function Name (experimental): What is the Firebase Cloud Function Name?\n  This is the name of the Firestore Cloud Function for transforming the data before transmitting to Algolia for indexing.\n  This function should be deployed to the same Firebase Project and Location as the Firestore/Algolia extension.\n  Refer to [Call functions for your app](https://firebase.google.com/docs/functions/callable).\n  Below is an example of a Transform function used for my testing:\n  ```javascript\n    import * as functions from \"firebase-functions\";\n\n    const doStuffToData = (payload: any) => {\n      return {\n      ...payload,\n      \"hello\": \"world\",\n      };\n    };\n\n    export const helloWorld = functions.https.onCall((payload) => {\n      const transformedData = doStuffToData(payload);\n      return transformedData;\n    });\n  ```\n  **Note**: The Transform Firebase Function should be set up to unauthenticated users at this time.\n\n#### Cloud Functions\n\n- **executeIndexOperation:** Firestore document-triggered function that creates, updates, or deletes data in Algolia.\n","externalServices":[{"name":"Algolia","pricingUri":"https://algolia.com/pricing"}],"lifecycleEvents":[{"stage":"ON_INSTALL","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"},{"stage":"ON_UPDATE","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"},{"stage":"ON_CONFIGURE","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"}],"displayName":"Search Firestore with Algolia","tags":["ai","search","semantic-search","vector-search","text-search"]},"fetchTime":"2024-07-05T04:35:11.264165Z","lastOperationName":"projects/algolia-b2ebc/operations/ea678f9d-3a07-446f-b67b-1edf37a705e0","state":"ACTIVE"},"params":{"ALGOLIA_INDEX_NAME":"post_index","LOCATION":"asia-northeast3","ALGOLIA_APP_ID":"6BVM9P8U9W","FIELDS":"title,userId,content,commentCount,images,tag,createAt","DATABASE_ID":"(default)","ALGOLIA_API_KEY":"projects/640370611193/secrets/firestore-algolia-search-ALGOLIA_API_KEY-b9l1/versions/1","COLLECTION_PATH":"posts","DO_FULL_INDEXING":"false","FORCE_DATA_SYNC":"yes"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to the [Cloud Firestore tab](https://console.firebase.google.com/project/meloudy-96af8/database/firestore/data).\n\n1.  If it doesn't exist already, create a collection called `posts`.\n\n1.  Create, update, or delete a document in the `posts` collection.  Go to Algolia's dashboard and verify in Algolia that a record is created, updated, or deleted in the `post_index` index for application id `6BVM9P8U9W`.\n\n### Collection import\n\nIf the collection named `posts` exists, the extension has begun importing documents into the `post_index` Algolia Index. Additionally, a full reindex will occur each time the extension's configuration changes.\n\nA `lastmodified` attribute is added to Algolia records to eliminate race condition issues related from the Cloud Function cold start.\n\n### Using the extension\n\nThis extension listens to the Cloud Firestore collection `posts`. If you create, update, or delete a document within that collection, this extension will:\n\n- Indexes the document and send all the fields or configured fields defined in the extension.\n- or, removes the record from Algolia index if the document is deleted.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"algolia/firestore-algolia-search","extensionVersion":"1.2.7","systemParams":{"firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","firebaseextensions.v1beta.function/minInstances":"0","firebaseextensions.v1beta.function/memory":"256"}},"lastOperationName":"projects/meloudy-96af8/operations/c7f640b5-1363-49ad-99bd-3e7bc88edd51","serviceAccountEmail":"ext-firestore-algolia-search@meloudy-96af8.iam.gserviceaccount.com","lastOperationType":"CONFIGURE","etag":"634a0a906e99eff3f9a59fb0d7d702d7981cb8c0b98b759ceccce12a05ba2c5c","runtimeData":{"stateUpdateTime":"2024-12-12T09:27:54.603472251Z","processingState":{"state":"PROCESSING_COMPLETE","detailMessage":"Existing documents were not indexed because \"Indexing existing documents?\" is configured to false. If you want to run a full reindex, reconfigure this instance."}}},{"name":"projects/meloudy-96af8/instances/firestore-algolia-search-user","createTime":"2024-12-13T05:54:24.030235Z","updateTime":"2024-12-13T05:59:36.391009Z","state":"ACTIVE","config":{"name":"projects/meloudy-96af8/instances/firestore-algolia-search-user/configurations/812391f9-0d6b-40cb-bf78-fce69a2fcacc","createTime":"2024-12-13T05:54:24.030235Z","source":{"name":"projects/algolia-b2ebc/sources/a9ff9aba-022b-44af-83ef-04c8d1b85593","packageUri":"https://storage.googleapis.com/firebase-extensions-packages-prod/algolia-firestore-algolia-search-1.2.7-45aa5447-9f8b-46a6-95b9-5f7dbe3bda66.zip","hash":"9151b4368a9a5cee01940524e2c13b71929d366153f5cbd944edeb5c787b52c4","extensionRoot":"/","spec":{"specVersion":"v1beta","name":"firestore-algolia-search","version":"1.2.7","description":"Enables full text search of your Cloud Firestore data with Algolia.","roles":[{"role":"datastore.user","reason":"Allows this extension to access Cloud Firestore to read."}],"resources":[{"name":"executeIndexOperation","type":"firebaseextensions.v1beta.function","propertiesYaml":"eventTrigger:\n  eventType: providers/cloud.firestore/eventTypes/document.write\n  resource: projects/${PROJECT_ID}/databases/${DATABASE_ID}/documents/${COLLECTION_PATH}/{documentID}\nlocation: ${LOCATION}\nruntime: nodejs18\n","description":"Firestore document-triggered function that creates, updates, or deletes data in Algolia.","deletionPolicy":"DELETE"},{"name":"executeFullIndexOperation","type":"firebaseextensions.v1beta.function","propertiesYaml":"availableMemoryMb: 1024\nlocation: ${param:LOCATION}\nruntime: nodejs18\ntaskQueueTrigger: {}\ntimeout: 540s\n","description":"Loads all the data from your FireStore database into Algolia","deletionPolicy":"DELETE"}],"billingRequired":true,"author":{"authorName":"Algolia","url":"https://algolia.com"},"contributors":[{"authorName":"Sajid Momin","email":"sajid.momin@algolia.com","url":"https://github.com/smomin"}],"license":"Apache-2.0","sourceUrl":"https://github.com/algolia/firestore-algolia-search/tree/main","params":[{"param":"DATABASE_ID","label":"Database ID","type":"STRING","description":"Enter database that contains the collections that you want to monitor?\n","required":true,"default":"(default)","example":"test","immutable":true},{"param":"COLLECTION_PATH","label":"Collection Path","type":"STRING","description":"What is the path to the Cloud Firestore collection where the extension should monitor for changes?\n","required":true,"example":"store","validationRegex":"^[^/]+(/[^/]+/[^/]+)*$","validationErrorMessage":"Firestore collection paths must be an odd number of segments separated by slashes, e.g. \"movies/{id}/actors\".","immutable":true},{"param":"FIELDS","label":"Indexable Fields","type":"STRING","description":"This can be a comma separated list or left blank to index all fields. For performance reasons, [record size is limited](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/in-depth/index-and-records-size-and-usage-limitations/#record-size-limits). If you're receiving errors that your records are too large, refer to the [reducing record size documentation](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/how-to/reducing-object-size/).\n","example":"name,category,price,sales"},{"param":"FORCE_DATA_SYNC","label":"Force Data Sync","type":"SELECT","description":"The extension uses approaches to mitigate race conditions but it might not be a 100% fool proof.  This setting will make sure the function is using the latest data from Firestore by making another read call before processing and sending to Algolia.  note: This will be a add to your usage of Firestore.","options":[{"value":"no","label":"No"},{"value":"yes","label":"Yes"}],"default":"no"},{"param":"ALGOLIA_INDEX_NAME","label":"Algolia Index Name","type":"STRING","description":"This is the name of the [Algolia index](https://www.algolia.com/doc/faq/basics/what-is-an-index/) where the records will be persisted. Refer to [naming your index](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#naming-your-index) for more information.","required":true},{"param":"ALGOLIA_APP_ID","label":"Algolia Application Id","type":"STRING","description":"This is the Algolia application you want to index your data to. You can find your credentials including application ID on your Algolia dashboard, under the [API keys tab](https://www.algolia.com/api-keys).","required":true},{"param":"ALGOLIA_API_KEY","label":"Algolia API Key","type":"SECRET","description":"We recommend [creating a new API key](https://www.algolia.com/doc/guides/security/api-keys/#creating-and-managing-api-keys) with \"addObject\", \"deleteObject\", \"listIndexes\", \"deleteIndex\", \"editSettings\", and \"settings\" permissions. **Do not use the Admin API key**.","required":true},{"param":"ALT_OBJECT_ID","label":"Alternative Object Id","type":"STRING","description":"Specify an alternative Firestore document property to use for the Algolia record Id.  Use `(path)` if the document path is desired as the Algolia ObjectID.  The default is the Firestore document Id. **If you set this property, make sure to clear out the Algolia Index since the ObjectID will be different resulting in duplicate records.**"},{"param":"TRANSFORM_FUNCTION","label":"Transform Function Name (Experimental)","type":"STRING","description":"Specify a Firebase Cloud Function for any data transformation before saving into Algolia. Refer to [Call functions for your app](https://firebase.google.com/docs/functions/callable)."},{"param":"DO_FULL_INDEXING","label":"Full Index existing documents?","type":"SELECT","description":"Should existing documents in the Firestore collection be indexed as well?\n","required":true,"options":[{"value":"true","label":"Yes"},{"value":"false","label":"No"}]},{"param":"LOCATION","label":"Cloud Functions location","type":"SELECT","description":"Where do you want to deploy the functions created for this extension? You usually want a location close to your database. For help selecting a location, refer to the [location selection guide](https://firebase.google.com/docs/functions/locations).","required":true,"options":[{"value":"us-central1","label":"Iowa (us-central1)"},{"value":"us-east1","label":"South Carolina (us-east1)"},{"value":"us-east4","label":"Northern Virginia (us-east4)"},{"value":"us-west2","label":"Los Angeles (us-west2)"},{"value":"us-west3","label":"Salt Lake City (us-west3)"},{"value":"us-west4","label":"Las Vegas (us-west4)"},{"value":"europe-central2","label":"Warsaw (europe-central2)"},{"value":"europe-west1","label":"Belgium (europe-west1)"},{"value":"europe-west2","label":"London (europe-west2)"},{"value":"europe-west3","label":"Frankfurt (europe-west3)"},{"value":"europe-west6","label":"Zurich (europe-west6)"},{"value":"asia-east2","label":"Hong Kong (asia-east2)"},{"value":"asia-northeast1","label":"Tokyo (asia-northeast1)"},{"value":"asia-northeast2","label":"Osaka (asia-northeast2)"},{"value":"asia-northeast3","label":"Seoul (asia-northeast3)"},{"value":"asia-south1","label":"Mumbai (asia-south1)"},{"value":"asia-southeast2","label":"Jakarta (asia-southeast2)"},{"value":"northamerica-northeast1","label":"Montreal (northamerica-northeast1)"},{"value":"southamerica-east1","label":"Sao Paulo (southamerica-east1)"},{"value":"australia-southeast1","label":"Sydney (australia-southeast1)"}],"immutable":true}],"preinstallContent":"Use this extension to index your Cloud Firestore data to Algolia and keep it synced.  The extension is applied and configured on a Firestore [collection](https://firebase.google.com/docs/firestore/data-model#collections).\n\nThis extension listens for changes on the specified collection. If you add a [document](https://firebase.google.com/docs/firestore/data-model#documents), the extension indexes it as a [record in Algolia](https://www.algolia.com/doc/faq/basics/what-is-a-record/). The extension only indexes the fields defined in the extension configuration and uses the [document Id](https://firebase.google.com/docs/firestore/manage-data/add-data#add_a_document) as the Algolia [object Id](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#using-unique-object-identifiers).\n\nAnytime you update a document, the extension propagates the update to the corresponding Algolia record. If you delete a document, the extension removes the corresponding Algolia record.\n\n#### Important\n\nUpon installation or when the extension's configuration is changed, the documents in the specified collection will be synced to Algolia.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've\n[set up a Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart)\nin your Firebase project.\n\nYou must also have an Algolia account set up before installing this\nextension. You can do so on the [Algolia](https://www.algolia.com/) site.\n\n#### Billing\n\nThis extension uses the following Firebase services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nThis extension also uses the following third-party services:\n\n- Algolia ([pricing information](https://www.algolia.com/pricing))\n\nYou are responsible for any costs associated with your use of these services.\n\n#### Note from Firebase\n\nTo install this extension, your Firebase project must be on the Blaze (pay-as-you-go) plan. You will only be charged for the resources you use. Most Firebase services offer a free tier for low-volume use. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nYou will be billed a small amount (typically less than $0.10) when you install or reconfigure this extension. See Cloud Functions under [Firebase Pricing](https://firebase.google.com/pricing) for a detailed explanation.\n","postinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to the [Cloud Firestore tab](https://console.firebase.google.com/project/${param:PROJECT_ID}/database/firestore/data).\n\n1.  If it doesn't exist already, create a collection called `${param:COLLECTION_PATH}`.\n\n1.  Create, update, or delete a document in the `${param:COLLECTION_PATH}` collection.  Go to Algolia's dashboard and verify in Algolia that a record is created, updated, or deleted in the `${param:ALGOLIA_INDEX_NAME}` index for application id `${param:ALGOLIA_APP_ID}`.\n\n### Collection import\n\nIf the collection named `${param:COLLECTION_PATH}` exists, the extension has begun importing documents into the `${param:ALGOLIA_INDEX_NAME}` Algolia Index. Additionally, a full reindex will occur each time the extension's configuration changes.\n\nA `lastmodified` attribute is added to Algolia records to eliminate race condition issues related from the Cloud Function cold start.\n\n### Using the extension\n\nThis extension listens to the Cloud Firestore collection `${param:COLLECTION_PATH}`. If you create, update, or delete a document within that collection, this extension will:\n\n- Indexes the document and send all the fields or configured fields defined in the extension.\n- or, removes the record from Algolia index if the document is deleted.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","readmeContent":"# Search Firestore with Algolia\n\n**Author**: Algolia (**[https://www.algolia.com](https://www.algolia.com)**)\n\n**Description**: Enable full text search of your Cloud Firestore data with Algolia.\n\n**Details**: Use this extension to index your Cloud Firestore data to [Algolia](https://www.algolia.com/doc/) and keep it synced.\n\nYou can then [configure your relevance](/doc/guides/getting-started/how-algolia-works/in-depth/implementation-process/#configuring-relevance) using the [Algolia dashboard](https://www.algolia.com/dashboard) or [API clients](/doc/api-client/getting-started/install/javascript/). From there, you can use Algolia's [front-end libraries](/doc/guides/building-search-ui/what-is-instantsearch/js/) to incorporate search components into your Firebase app's UI.\n\n---\n\nWe welcome [bug reports and feature requests](https://github.com/algolia/firestore-algolia-search/issues/new) as well as pull requests in this GitHub repository.\n\n### Firebase CLI\n\n```bash\nfirebase ext:install algolia/firestore-algolia-search --project=<your-project-id>\n```\n\n> Learn more about installing extensions in the Firebase Extensions documentation: [console](https://firebase.google.com/docs/extensions/install-extensions?platform=console), [CLI](https://firebase.google.com/docs/extensions/install-extensions?platform=cli)\n\n---\n\n#### Details\n\nUse this extension to index your Cloud Firestore data to Algolia and keep it synced.  The extension is applied and configured on a Firestore [collection](https://firebase.google.com/docs/firestore/data-model#collections) or [subcollection](https://firebase.google.com/docs/firestore/data-model#subcollections).\n\nThis extension listens for changes on the specified collection. If you add a [document](https://firebase.google.com/docs/firestore/data-model#documents), the extension indexes it as a [record in Algolia](https://www.algolia.com/doc/faq/basics/what-is-a-record/). The extension only indexes the fields defined in the extension configuration and uses the [document Id](https://firebase.google.com/docs/firestore/manage-data/add-data#add_a_document) as the Algolia [object Id](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#using-unique-object-identifiers).\n\nAnytime you update a document, the extension propagates the update to the corresponding Algolia record. If you delete a document, the extension removes the corresponding Algolia record.\n\n#### Additional setup\n\nBefore installing this extension, make sure that you've set up:\n- [Cloud Firestore database](https://firebase.google.com/docs/firestore/quickstart) in your Firebase project.\n- [Algolia](https://www.algolia.com/) account.\n\n\n#### Billing\n\nThis extension uses the following Firebase services which may have associated charges:\n\n- Cloud Firestore\n- Cloud Functions\n\nThis extension also uses the following third-party services:\n\n- Algolia ([pricing information](https://www.algolia.com/pricing))\n\nYou are responsible for any costs associated with your use of these services.\n\n#### Note from Firebase\n\nTo install this extension, your Firebase project must be on the Blaze (pay-as-you-go) plan. You will only be charged for the resources you use. Most Firebase services offer a free tier for low-volume use. [Learn more about Firebase billing.](https://firebase.google.com/pricing)\n\nYou will be billed a small amount (typically less than $0.10) when you install or reconfigure this extension. See Cloud Functions under [Firebase Pricing](https://firebase.google.com/pricing) for a detailed explanation.\n\n#### Configuration Parameters\n\nCloud Functions Location: Where do you want to deploy the functions created for this extension?\n  You usually want a location close to your database.\n  For help selecting a location, refer to the\n  [location selection guide](https://firebase.google.com/docs/functions/locations).\n- Database Id: Enter the database id that contains the collection(s) that you want to monitor?\n  Firebase supports [multiple databases](https://cloud.google.com/blog/products/databases/manage-multiple-firestore-databases-in-a-project) in a project.  In order to use a non default database, enter the database Id.\n\n- Collection Path: What is the path to the Cloud Firestore collection where the extension should monitor for changes?\n  For subcollection, the syntax is `parent_collection/{parentId}/target_collection`. (please note, there is not depublication process on subcollections).\n\n- Fields: What document fields should be indexed to provide the best search experience? For more information on which fields to index to Algolia, see the [Algolia documentation on records](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/#algolia-records).\n  This can be a comma separated list or left blank to index all fields.\n  For performance reasons, [record size is limited](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/in-depth/index-and-records-size-and-usage-limitations/#record-size-limits).\n  If you're receiving errors that your records are too large, refer to the [reducing record size documentation](https://www.algolia.com/doc/guides/sending-and-managing-data/prepare-your-data/how-to/reducing-object-size/).\n\n- Force Data Sync: Are you facing data inconsistent issues possibly due to race conditions?\n  This setting will make sure the function is using the latest data from Firestore by making another read call before processing and sending to Algolia.\n\n- Algolia Application ID: What is the Algolia Application Id?\n  This is the Algolia application you want to index your data to.\n  You can find your credentials including application ID on your Algolia dashboard,\n  under the [API keys tab](https://www.algolia.com/api-keys).\n\n- Algolia API Key: What is your Algolia API key?\n  We recommend [creating a new API key](https://www.algolia.com/doc/guides/security/api-keys/#creating-and-managing-api-keys)\n  with \"addObject\", \"deleteObject\", \"listIndexes\", \"deleteIndex\", \"editSettings\", and \"settings\" permissions.\n  **Do not use the Admin API key**.\n\n- Algolia Index Name: What is the Algolia index name?\n  This is the name of the [Algolia index](https://www.algolia.com/doc/faq/basics/what-is-an-index/)\n  where the records will be persisted.\n  Refer to [naming your index](https://www.algolia.com/doc/guides/sending-and-managing-data/send-and-update-your-data/#naming-your-index) for more information.\n\n- Alternative Object Id: Are you looking to use another Firestore document property or document path as the Algolia ObjectID?\n  Specify an alternative Firestore document property to use for the Algolia record Id.  Use `(path)` if the document path is desired as the Algolia ObjectID.  The default is the Firestore document Id.\n  **If you set this property, make sure to clear out the Algolia Index since the ObjectID will be different resulting in duplicate records.**\n\n- Transform Function Name (experimental): What is the Firebase Cloud Function Name?\n  This is the name of the Firestore Cloud Function for transforming the data before transmitting to Algolia for indexing.\n  This function should be deployed to the same Firebase Project and Location as the Firestore/Algolia extension.\n  Refer to [Call functions for your app](https://firebase.google.com/docs/functions/callable).\n  Below is an example of a Transform function used for my testing:\n  ```javascript\n    import * as functions from \"firebase-functions\";\n\n    const doStuffToData = (payload: any) => {\n      return {\n      ...payload,\n      \"hello\": \"world\",\n      };\n    };\n\n    export const helloWorld = functions.https.onCall((payload) => {\n      const transformedData = doStuffToData(payload);\n      return transformedData;\n    });\n  ```\n  **Note**: The Transform Firebase Function should be set up to unauthenticated users at this time.\n\n#### Cloud Functions\n\n- **executeIndexOperation:** Firestore document-triggered function that creates, updates, or deletes data in Algolia.\n","externalServices":[{"name":"Algolia","pricingUri":"https://algolia.com/pricing"}],"lifecycleEvents":[{"stage":"ON_INSTALL","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"},{"stage":"ON_UPDATE","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"},{"stage":"ON_CONFIGURE","processingMessage":"Indexing existing documents in ${COLLECTION_PATH}","taskQueueTriggerFunction":"executeFullIndexOperation"}],"displayName":"Search Firestore with Algolia","tags":["ai","search","semantic-search","vector-search","text-search"]},"fetchTime":"2024-07-05T04:35:11.264165Z","lastOperationName":"projects/algolia-b2ebc/operations/ea678f9d-3a07-446f-b67b-1edf37a705e0","state":"ACTIVE"},"params":{"ALGOLIA_INDEX_NAME":"user_index","ALGOLIA_API_KEY":"projects/640370611193/secrets/firestore-algolia-search-user-ALGOLIA_API_KEY/versions/1","FIELDS":"displayName,photoURL","FORCE_DATA_SYNC":"no","ALGOLIA_APP_ID":"6BVM9P8U9W","DO_FULL_INDEXING":"false","COLLECTION_PATH":"users","DATABASE_ID":"(default)","LOCATION":"asia-northeast3"},"populatedPostinstallContent":"### See it in action\n\nYou can test out this extension right away:\n\n1.  Go to the [Cloud Firestore tab](https://console.firebase.google.com/project/meloudy-96af8/database/firestore/data).\n\n1.  If it doesn't exist already, create a collection called `users`.\n\n1.  Create, update, or delete a document in the `users` collection.  Go to Algolia's dashboard and verify in Algolia that a record is created, updated, or deleted in the `user_index` index for application id `6BVM9P8U9W`.\n\n### Collection import\n\nIf the collection named `users` exists, the extension has begun importing documents into the `user_index` Algolia Index. Additionally, a full reindex will occur each time the extension's configuration changes.\n\nA `lastmodified` attribute is added to Algolia records to eliminate race condition issues related from the Cloud Function cold start.\n\n### Using the extension\n\nThis extension listens to the Cloud Firestore collection `users`. If you create, update, or delete a document within that collection, this extension will:\n\n- Indexes the document and send all the fields or configured fields defined in the extension.\n- or, removes the record from Algolia index if the document is deleted.\n\n### Monitoring\n\nAs a best practice, you can [monitor the activity](https://firebase.google.com/docs/extensions/manage-installed-extensions#monitor) of your installed extension, including checks on its health, usage, and logs.\n","extensionRef":"algolia/firestore-algolia-search","extensionVersion":"1.2.7","systemParams":{"firebaseextensions.v1beta.function/vpcConnectorEgressSettings":"VPC_CONNECTOR_EGRESS_SETTINGS_UNSPECIFIED","firebaseextensions.v1beta.function/minInstances":"0","firebaseextensions.v1beta.function/memory":"256"}},"lastOperationName":"projects/meloudy-96af8/operations/cd3b376d-cbaf-4877-ae48-cf18bf5242f3","serviceAccountEmail":"ext-firestore-algolia-sea-jmxs@meloudy-96af8.iam.gserviceaccount.com","lastOperationType":"CREATE","etag":"65e542901dc235ab1f884f64ade320fb45980f4903ee55bdffa6c39cd389a3f9","runtimeData":{"stateUpdateTime":"2024-12-13T06:01:22.526446238Z","processingState":{"state":"PROCESSING_COMPLETE","detailMessage":"Existing documents were not indexed because \"Indexing existing documents?\" is configured to false. If you want to run a full reindex, reconfigure this instance."}}}]}
[info] i  functions: Loaded environment variables from .env. 
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged E:\Web\webportfolio\React\Nextext\nextext\functions (122.9 KB) for uploading 
[debug] [2025-02-17T09:48:11.835Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:11.835Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:11.835Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/meloudy-96af8/locations/-/functions [none]
[debug] [2025-02-17T09:48:13.616Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/meloudy-96af8/locations/-/functions 200
[debug] [2025-02-17T09:48:13.616Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/meloudy-96af8/locations/-/functions {"functions":[{"name":"projects/meloudy-96af8/locations/asia-northeast3/functions/ext-firestore-algolia-search-user-executeIndexOperation","description":"Firestore document-triggered function that creates, updates, or deletes data in Algolia.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/d6c31a7fd8927200a309842355f2b424db0cbdd4db82bac19514d2358a9726ee","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.write","resource":"projects/meloudy-96af8/databases/(default)/documents/users/{documentID}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"executeIndexOperation","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-algolia-sea-jmxs@meloudy-96af8.iam.gserviceaccount.com","updateTime":"2024-12-13T05:59:07.247Z","versionId":"2","labels":{"goog-firebase-ext-iid":"firestore-algolia-search-user","firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-algolia-search-user","goog-firebase-ext":"firestore-algolia-search","deployment-tool":"firebase-extensions"},"environmentVariables":{"ALGOLIA_APP_ID":"6BVM9P8U9W","ALGOLIA_INDEX_NAME":"user_index","COLLECTION_PATH":"users","DATABASE_ID":"(default)","DATABASE_INSTANCE":"","DATABASE_URL":"","DO_FULL_INDEXING":"false","EXT_INSTANCE_ID":"firestore-algolia-search-user","FIELDS":"displayName,photoURL","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"databaseURL\":\"\",\"storageBucket\":\"meloudy-96af8.appspot.com\"}","FORCE_DATA_SYNC":"no","GCLOUD_PROJECT":"meloudy-96af8","LOCATION":"asia-northeast3","PROJECT_ID":"meloudy-96af8","STORAGE_BUCKET":"meloudy-96af8.appspot.com"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"677c5df6-6f95-4777-9193-50546ae88e3e","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"ALGOLIA_API_KEY","projectId":"640370611193","secret":"firestore-algolia-search-user-ALGOLIA_API_KEY","version":"1"}],"buildName":"projects/640370611193/locations/asia-northeast3/builds/677c5df6-6f95-4777-9193-50546ae88e3e","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com"},{"name":"projects/meloudy-96af8/locations/asia-northeast3/functions/ext-firestore-algolia-search-user-executeFullIndexOperation","description":"Loads all the data from your FireStore database into Algolia","sourceArchiveUrl":"gs://firebase-mod-sources-prod/d6c31a7fd8927200a309842355f2b424db0cbdd4db82bac19514d2358a9726ee","httpsTrigger":{"url":"https://asia-northeast3-meloudy-96af8.cloudfunctions.net/ext-firestore-algolia-search-user-executeFullIndexOperation","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"executeFullIndexOperation","timeout":"540s","availableMemoryMb":1024,"serviceAccountEmail":"ext-firestore-algolia-sea-jmxs@meloudy-96af8.iam.gserviceaccount.com","updateTime":"2024-12-13T05:58:47.904Z","versionId":"2","labels":{"goog-firebase-ext-iid":"firestore-algolia-search-user","firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-algolia-search-user","goog-firebase-ext":"firestore-algolia-search","deployment-tool":"firebase-extensions"},"environmentVariables":{"ALGOLIA_APP_ID":"6BVM9P8U9W","ALGOLIA_INDEX_NAME":"user_index","COLLECTION_PATH":"users","DATABASE_ID":"(default)","DATABASE_INSTANCE":"","DATABASE_URL":"","DO_FULL_INDEXING":"false","EXT_INSTANCE_ID":"firestore-algolia-search-user","FIELDS":"displayName,photoURL","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"databaseURL\":\"\",\"storageBucket\":\"meloudy-96af8.appspot.com\"}","FORCE_DATA_SYNC":"no","GCLOUD_PROJECT":"meloudy-96af8","LOCATION":"asia-northeast3","PROJECT_ID":"meloudy-96af8","STORAGE_BUCKET":"meloudy-96af8.appspot.com"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"1445f42d-a7a6-4617-832c-c57a92ff126b","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"ALGOLIA_API_KEY","projectId":"640370611193","secret":"firestore-algolia-search-user-ALGOLIA_API_KEY","version":"1"}],"buildName":"projects/640370611193/locations/asia-northeast3/builds/1445f42d-a7a6-4617-832c-c57a92ff126b","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com"},{"name":"projects/meloudy-96af8/locations/asia-northeast3/functions/ext-firestore-algolia-search-executeFullIndexOperation","description":"Loads all the data from your FireStore database into Algolia","sourceArchiveUrl":"gs://firebase-mod-sources-prod/d6c31a7fd8927200a309842355f2b424db0cbdd4db82bac19514d2358a9726ee","httpsTrigger":{"url":"https://asia-northeast3-meloudy-96af8.cloudfunctions.net/ext-firestore-algolia-search-executeFullIndexOperation","securityLevel":"SECURE_OPTIONAL"},"status":"ACTIVE","entryPoint":"executeFullIndexOperation","timeout":"540s","availableMemoryMb":1024,"serviceAccountEmail":"ext-firestore-algolia-search@meloudy-96af8.iam.gserviceaccount.com","updateTime":"2024-12-12T09:25:32.483Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-algolia-search","goog-firebase-ext":"firestore-algolia-search","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-algolia-search"},"environmentVariables":{"ALGOLIA_APP_ID":"6BVM9P8U9W","ALGOLIA_INDEX_NAME":"post_index","COLLECTION_PATH":"posts","DATABASE_ID":"(default)","DATABASE_INSTANCE":"","DATABASE_URL":"","DO_FULL_INDEXING":"false","EXT_INSTANCE_ID":"firestore-algolia-search","FIELDS":"title,userId,content,commentCount,images,tag,createAt","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"databaseURL\":\"\",\"storageBucket\":\"meloudy-96af8.appspot.com\"}","FORCE_DATA_SYNC":"yes","GCLOUD_PROJECT":"meloudy-96af8","LOCATION":"asia-northeast3","PROJECT_ID":"meloudy-96af8","STORAGE_BUCKET":"meloudy-96af8.appspot.com"},"runtime":"nodejs18","ingressSettings":"ALLOW_ALL","buildId":"82b0aa44-97d5-44e3-9313-c705c1f5cc2a","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"ALGOLIA_API_KEY","projectId":"640370611193","secret":"firestore-algolia-search-ALGOLIA_API_KEY-b9l1","version":"1"}],"buildName":"projects/640370611193/locations/asia-northeast3/builds/82b0aa44-97d5-44e3-9313-c705c1f5cc2a","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com"},{"name":"projects/meloudy-96af8/locations/asia-northeast3/functions/ext-firestore-algolia-search-executeIndexOperation","description":"Firestore document-triggered function that creates, updates, or deletes data in Algolia.","sourceArchiveUrl":"gs://firebase-mod-sources-prod/d6c31a7fd8927200a309842355f2b424db0cbdd4db82bac19514d2358a9726ee","eventTrigger":{"eventType":"providers/cloud.firestore/eventTypes/document.write","resource":"projects/meloudy-96af8/databases/(default)/documents/posts/{documentID}","service":"firestore.googleapis.com","failurePolicy":{}},"status":"ACTIVE","entryPoint":"executeIndexOperation","timeout":"60s","availableMemoryMb":256,"serviceAccountEmail":"ext-firestore-algolia-search@meloudy-96af8.iam.gserviceaccount.com","updateTime":"2024-12-12T09:25:56.208Z","versionId":"2","labels":{"firebase-extensions-ar":"enabled","goog-dm":"firebase-ext-firestore-algolia-search","goog-firebase-ext":"firestore-algolia-search","deployment-tool":"firebase-extensions","goog-firebase-ext-iid":"firestore-algolia-search"},"environmentVariables":{"ALGOLIA_APP_ID":"6BVM9P8U9W","ALGOLIA_INDEX_NAME":"post_index","COLLECTION_PATH":"posts","DATABASE_ID":"(default)","DATABASE_INSTANCE":"","DATABASE_URL":"","DO_FULL_INDEXING":"false","EXT_INSTANCE_ID":"firestore-algolia-search","FIELDS":"title,userId,content,commentCount,images,tag,createAt","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"databaseURL\":\"\",\"storageBucket\":\"meloudy-96af8.appspot.com\"}","FORCE_DATA_SYNC":"yes","GCLOUD_PROJECT":"meloudy-96af8","LOCATION":"asia-northeast3","PROJECT_ID":"meloudy-96af8","STORAGE_BUCKET":"meloudy-96af8.appspot.com"},"runtime":"nodejs18","maxInstances":3000,"ingressSettings":"ALLOW_INTERNAL_ONLY","buildId":"e7bc2965-f79d-4a35-9cc0-ed81b7f3bdfc","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"secretEnvironmentVariables":[{"key":"ALGOLIA_API_KEY","projectId":"640370611193","secret":"firestore-algolia-search-ALGOLIA_API_KEY-b9l1","version":"1"}],"buildName":"projects/640370611193/locations/asia-northeast3/builds/e7bc2965-f79d-4a35-9cc0-ed81b7f3bdfc","dockerRegistry":"ARTIFACT_REGISTRY","automaticUpdatePolicy":{},"buildServiceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com"}]}
[debug] [2025-02-17T09:48:13.617Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:13.617Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:13.617Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-02-17T09:48:15.819Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/-/functions 200
[debug] [2025-02-17T09:48:15.819Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/-/functions {"functions":[{"name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"build":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785388350985"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00022-fep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2025-02-17T09:43:35.160178521Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","createTime":"2024-12-18T11:19:44.834814502Z","satisfiesPzi":true},{"name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"build":"projects/640370611193/locations/us-central1/builds/ab6dccf8-9203-4417-8279-8dae4ba822fa","runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785306736983"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"maxInstanceCount":100,"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","updateTime":"2025-02-17T09:43:09.637867342Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"d533fbcd5c1f756aa7cdfa890a80c53fb793cc65"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","createTime":"2024-12-19T05:49:53.833817493Z","satisfiesPzi":true}]}
[debug] [2025-02-17T09:48:15.821Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:15.821Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:15.821Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:15.821Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:15.821Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) [none]
[debug] [2025-02-17T09:48:15.822Z] >>> [apiv2][query] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) [none]
[debug] [2025-02-17T09:48:15.970Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) 200
[debug] [2025-02-17T09:48:15.970Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) {"name":"projects/meloudy-96af8/databases/(default)","uid":"864ffa35-cf63-40d9-9feb-563cc2abaef9","createTime":"2024-10-23T00:25:26.230211Z","updateTime":"2024-10-23T00:25:26.230211Z","locationId":"asia-northeast3","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-02-17T08:48:15.924820Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"v","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","etag":"IIahkOO2yosDMPGw4+eE2okD"}
[debug] [2025-02-17T09:48:15.989Z] <<< [apiv2][status] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) 200
[debug] [2025-02-17T09:48:15.989Z] <<< [apiv2][body] GET https://firestore.googleapis.com/v1/projects/meloudy-96af8/databases/(default) {"name":"projects/meloudy-96af8/databases/(default)","uid":"864ffa35-cf63-40d9-9feb-563cc2abaef9","createTime":"2024-10-23T00:25:26.230211Z","updateTime":"2024-10-23T00:25:26.230211Z","locationId":"asia-northeast3","type":"FIRESTORE_NATIVE","concurrencyMode":"PESSIMISTIC","versionRetentionPeriod":"3600s","earliestVersionTime":"2025-02-17T08:48:15.945332Z","appEngineIntegrationMode":"DISABLED","keyPrefix":"v","pointInTimeRecoveryEnablement":"POINT_IN_TIME_RECOVERY_DISABLED","deleteProtectionState":"DELETE_PROTECTION_DISABLED","databaseEdition":"STANDARD","etag":"IK7CkeO2yosDMPGw4+eE2okD"}
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-02-17T09:48:15.991Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:15.991Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-02-17T09:48:15.991Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:15.991Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-02-17T09:48:15.992Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:15.992Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-02-17T09:48:15.992Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:15.992Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:15.992Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/run.googleapis.com [none]
[debug] [2025-02-17T09:48:15.992Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/run.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:48:15.994Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/eventarc.googleapis.com [none]
[debug] [2025-02-17T09:48:15.994Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/eventarc.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:48:15.995Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/pubsub.googleapis.com [none]
[debug] [2025-02-17T09:48:15.995Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/pubsub.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:48:15.996Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/storage.googleapis.com [none]
[debug] [2025-02-17T09:48:15.996Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/storage.googleapis.com x-goog-quota-user=projects/meloudy-96af8
[debug] [2025-02-17T09:48:17.448Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/run.googleapis.com 200
[debug] [2025-02-17T09:48:17.448Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[debug] [2025-02-17T09:48:17.455Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/eventarc.googleapis.com 200
[debug] [2025-02-17T09:48:17.455Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[debug] [2025-02-17T09:48:17.464Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/pubsub.googleapis.com 200
[debug] [2025-02-17T09:48:17.464Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-02-17T09:48:17.494Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/storage.googleapis.com 200
[debug] [2025-02-17T09:48:17.494Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/meloudy-96af8/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-02-17T09:48:17.495Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:17.495Z] Checked if tokens are valid: true, expires at: 1739788570491
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-02-17T09:48:17.496Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:17.496Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:17.496Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-02-17T09:48:17.496Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-02-17T09:48:17.922Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-02-17T09:48:17.922Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-640370611193@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"107075483169055343612"}}
[debug] [2025-02-17T09:48:17.924Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-02-17T09:48:17.924Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/640370611193/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-640370611193@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"102571697287508757506"}}
[debug] [2025-02-17T09:48:17.926Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:17.926Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:17.926Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 [none]
[debug] [2025-02-17T09:48:19.040Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 200
[debug] [2025-02-17T09:48:19.040Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/meloudy-96af8 {"projectNumber":"640370611193","projectId":"meloudy-96af8","lifecycleState":"ACTIVE","name":"Meloudy","labels":{"firebase":"enabled"},"createTime":"2024-10-21T22:24:57.261827Z"}
[debug] [2025-02-17T09:48:19.042Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:19.042Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:19.042Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/meloudy-96af8/billingInfo [none]
[debug] [2025-02-17T09:48:19.581Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/meloudy-96af8/billingInfo 200
[debug] [2025-02-17T09:48:19.581Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/meloudy-96af8/billingInfo {"name":"projects/meloudy-96af8/billingInfo","projectId":"meloudy-96af8","billingAccountName":"billingAccounts/01FFB0-CC6967-42D6E8","billingEnabled":true}
[debug] [2025-02-17T09:48:19.582Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:19.582Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:19.583Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-02-17T09:48:20.745Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-02-17T09:48:20.746Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/9d4cd7a6-a072-4ecf-8c8b-b997c94c829d.zip?GoogleAccessId=service-640370611193@gcf-admin-robot.iam.gserviceaccount.com&Expires=1739787500&Signature=OEIDNg4RemcinYUnPE9V8lTZfiB6o8ruHNsK5W2sxrvWhZsuDlQerG0IaPL4rDv4ZDgZNdxo%2FlBt60ZW%2Fb0izBvE581wNPPxWVXhZO2jOpbW6fgClJ0zDCdhwQ3VsHOpIaKUS6miZoZ3D087D7V51HJuqNjW6zoDDd9oBgA8fVkG4U7YoT74vG2RpyIyBf%2FMKYdRwVVUG8NJVVeXIlPTNH%2BS2iVB9MQqjFyNY4wxZGKXPbmDCgf04%2FC8ef6jGRBbf2F7gTTa%2BuzTiZmnur%2FSBzhldv2D7mYfuKwpvrlI1%2BBg2i9GgcXPt5dmeMDCbXXjjGUXqjg1s2W7uyS19%2FfFQA%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com","object":"9d4cd7a6-a072-4ecf-8c8b-b997c94c829d.zip"}}
[debug] [2025-02-17T09:48:20.746Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/9d4cd7a6-a072-4ecf-8c8b-b997c94c829d.zip GoogleAccessId=service-640370611193%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1739787500&Signature=OEIDNg4RemcinYUnPE9V8lTZfiB6o8ruHNsK5W2sxrvWhZsuDlQerG0IaPL4rDv4ZDgZNdxo%2FlBt60ZW%2Fb0izBvE581wNPPxWVXhZO2jOpbW6fgClJ0zDCdhwQ3VsHOpIaKUS6miZoZ3D087D7V51HJuqNjW6zoDDd9oBgA8fVkG4U7YoT74vG2RpyIyBf%2FMKYdRwVVUG8NJVVeXIlPTNH%2BS2iVB9MQqjFyNY4wxZGKXPbmDCgf04%2FC8ef6jGRBbf2F7gTTa%2BuzTiZmnur%2FSBzhldv2D7mYfuKwpvrlI1%2BBg2i9GgcXPt5dmeMDCbXXjjGUXqjg1s2W7uyS19%2FfFQA%3D%3D
[debug] [2025-02-17T09:48:20.746Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/9d4cd7a6-a072-4ecf-8c8b-b997c94c829d.zip [stream]
[debug] [2025-02-17T09:48:21.640Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/9d4cd7a6-a072-4ecf-8c8b-b997c94c829d.zip 200
[debug] [2025-02-17T09:48:21.640Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com/9d4cd7a6-a072-4ecf-8c8b-b997c94c829d.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: updating Node.js 18 (2nd Gen) function setHasUpdateCommentFlag(us-central1)... 
[info] i  functions: updating Node.js 18 (2nd Gen) function setHasUpdateFlag(us-central1)... 
[debug] [2025-02-17T09:48:21.646Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:21.646Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:21.646Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion%2CbuildConfig.buildEnvironmentVariables
[debug] [2025-02-17T09:48:21.646Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag {"name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com","object":"9d4cd7a6-a072-4ecf-8c8b-b997c94c829d.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"triggerRegion":"asia-northeast3"}}
[debug] [2025-02-17T09:48:24.892Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag 200
[debug] [2025-02-17T09:48:24.892Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-02-17T09:48:24.892Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:24.892Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:24.892Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 [none]
[debug] [2025-02-17T09:48:25.987Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 200
[debug] [2025-02-17T09:48:25.987Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785704646694"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/814ee2d6-3297-4135-aadd-a8899ae1f934?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:48:26.500Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:48:26.501Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:26.501Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:26.501Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 [none]
[debug] [2025-02-17T09:48:27.595Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 200
[debug] [2025-02-17T09:48:27.595Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785704646694"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/814ee2d6-3297-4135-aadd-a8899ae1f934?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:48:28.608Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:48:28.609Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:28.609Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:28.609Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 [none]
[debug] [2025-02-17T09:48:29.702Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 200
[debug] [2025-02-17T09:48:29.702Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785704646694"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/814ee2d6-3297-4135-aadd-a8899ae1f934?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:48:31.715Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:48:31.715Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:31.716Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:31.716Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 [none]
[debug] [2025-02-17T09:48:32.019Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 200
[debug] [2025-02-17T09:48:32.019Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785704646694"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/814ee2d6-3297-4135-aadd-a8899ae1f934?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:48:36.024Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:48:36.024Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:36.024Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:36.024Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 [none]
[debug] [2025-02-17T09:48:37.119Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 200
[debug] [2025-02-17T09:48:37.119Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785704646694"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/814ee2d6-3297-4135-aadd-a8899ae1f934?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:48:45.130Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:48:45.130Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:45.130Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:45.131Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 [none]
[debug] [2025-02-17T09:48:46.403Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 200
[debug] [2025-02-17T09:48:46.403Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785704646694"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/814ee2d6-3297-4135-aadd-a8899ae1f934?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:48:56.403Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:48:56.404Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:56.404Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:48:56.404Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 [none]
[debug] [2025-02-17T09:48:57.726Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 200
[debug] [2025-02-17T09:48:57.726Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785704646694"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/814ee2d6-3297-4135-aadd-a8899ae1f934?project=640370611193"},{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:49:07.729Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:49:07.729Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:07.729Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:07.730Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 [none]
[debug] [2025-02-17T09:49:09.022Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 200
[debug] [2025-02-17T09:49:09.022Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785704646694"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build finished","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/814ee2d6-3297-4135-aadd-a8899ae1f934?project=640370611193"},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdatecommentflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE=","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:49:09.022Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE= for region us-central1
[debug] [2025-02-17T09:49:09.022Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:09.023Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:09.023Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels%2CeventTrigger.eventType%2CeventTrigger.retryPolicy%2CeventTrigger.eventFilters%2CeventTrigger.triggerRegion%2CbuildConfig.buildEnvironmentVariables
[debug] [2025-02-17T09:49:09.023Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag {"name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-uploads-640370611193.us-central1.cloudfunctions.appspot.com","object":"9d4cd7a6-a072-4ecf-8c8b-b997c94c829d.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE="},"serviceConfig":{"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"eventTrigger":{"eventType":"google.cloud.firestore.document.v1.created","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"triggerRegion":"asia-northeast3"}}
[debug] [2025-02-17T09:49:11.866Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag 200
[debug] [2025-02-17T09:49:11.866Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:49:11.681543165Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-02-17T09:49:11.867Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:11.867Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:11.867Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 [none]
[debug] [2025-02-17T09:49:12.947Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 200
[debug] [2025-02-17T09:49:12.947Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:49:11.681543165Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785751643819"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE=","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00022-fep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Reusing build","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdateflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE=","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:49:12.947Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE= for region us-central1
[debug] [2025-02-17T09:49:13.455Z] [update-default-us-central1-setHasUpdateFlag] Retrying task index 0
[debug] [2025-02-17T09:49:13.455Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:13.455Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:13.456Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 [none]
[debug] [2025-02-17T09:49:14.545Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 200
[debug] [2025-02-17T09:49:14.545Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:49:11.681543165Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785751643819"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE=","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00022-fep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Reusing build","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdateflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE=","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:49:14.545Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE= for region us-central1
[debug] [2025-02-17T09:49:15.558Z] [update-default-us-central1-setHasUpdateFlag] Retrying task index 0
[debug] [2025-02-17T09:49:15.559Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:15.559Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:15.559Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 [none]
[debug] [2025-02-17T09:49:16.646Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 200
[debug] [2025-02-17T09:49:16.646Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:49:11.681543165Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785751643819"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE=","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00022-fep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Reusing build","state":"COMPLETE","resource":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934","stateMessages":[{"severity":"WARNING","type":"BuildAnalysisWarning","message":"Node.js 18 is no longer supported by the Node.js community as of 30 April, 2025. Node.js 18 will be deprecated on 2025-04-30. We recommend you to upgrade to the latest version of Node.js as soon as possible."}]},{"name":"SERVICE","message":"Updating Cloud Run service","state":"IN_PROGRESS","resource":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","resourceUri":"https://console.cloud.google.com/run/detail/us-central1/sethasupdateflag?project=meloudy-96af8","stateMessages":[{"severity":"INFO","type":"CloudRunServiceNewRevisionTrafficInfo","message":"A new revision will be deployed serving with 100% traffic."}]},{"name":"TRIGGER","state":"NOT_STARTED"}],"sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE=","operationType":"UPDATE_FUNCTION","buildName":"projects/640370611193/locations/us-central1/builds/814ee2d6-3297-4135-aadd-a8899ae1f934"},"done":false}
[debug] [2025-02-17T09:49:16.646Z] Got source token Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE= for region us-central1
[debug] [2025-02-17T09:49:18.648Z] [update-default-us-central1-setHasUpdateFlag] Retrying task index 0
[debug] [2025-02-17T09:49:18.648Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:18.648Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:18.648Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 [none]
[debug] [2025-02-17T09:49:19.024Z] [update-default-us-central1-setHasUpdateCommentFlag] Retrying task index 0
[debug] [2025-02-17T09:49:19.024Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:19.025Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:19.025Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 [none]
[debug] [2025-02-17T09:49:19.726Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 200
[debug] [2025-02-17T09:49:19.726Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785749937-62e536f9c3c85-c8ca4c27-54e7a023","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:49:11.681543165Z","endTime":"2025-02-17T09:49:18.261173988Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateFlag/function-source.zip","generation":"1739785751643819"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","sourceToken":"Cldwcm9qZWN0cy82NDAzNzA2MTExOTMvbG9jYXRpb25zL3VzLWNlbnRyYWwxL2J1aWxkcy84MTRlZTJkNi0zMjk3LTQxMzUtYWFkZC1hODg5OWFlMWY5MzQSenVzLWNlbnRyYWwxLWRvY2tlci5wa2cuZGV2L21lbG91ZHktOTZhZjgvZ2NmLWFydGlmYWN0cy9tZWxvdWR5LS05NmFmOF9fdXMtLWNlbnRyYWwxX19zZXRfaGFzX3VwZGF0ZV9jb21tZW50X2ZsYWc6dmVyc2lvbl8xGPmnwMjREiJOcHJvamVjdHMvbWVsb3VkeS05NmFmOC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvZnVuY3Rpb25zL3NldEhhc1VwZGF0ZUNvbW1lbnRGbGFnKgwIjIzMvQYQoPDGrQIyCG5vZGVqczE4OnYKI2djci5pby9nYWUtcnVudGltZXMvbm9kZWpzMTg6c3RhYmxlEk91cy1jZW50cmFsMS1kb2NrZXIucGtnLmRldi9zZXJ2ZXJsZXNzLXJ1bnRpbWVzL2dvb2dsZS0yMi1mdWxsL3J1bnRpbWVzL25vZGVqczE4QAE=","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdateflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdateflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdateflag-00022-fep","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdateflag-175724","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdateflag-175724-628","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cloud-console","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateFlag","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Could not create or update Cloud Run service sethasupdateflag, Container Healthcheck failed. Revision 'sethasupdateflag-00023-piv' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdateflag/revision_name/sethasupdateflag-00023-piv&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdateflag%22%0Aresource.labels.revision_name%3D%22sethasupdateflag-00023-piv%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"}}
[debug] [2025-02-17T09:49:19.726Z] Got source token undefined for region us-central1
[error] Could not create or update Cloud Run service sethasupdateflag, Container Healthcheck failed. Revision 'sethasupdateflag-00023-piv' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.

Logs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdateflag/revision_name/sethasupdateflag-00023-piv&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdateflag%22%0Aresource.labels.revision_name%3D%22sethasupdateflag-00023-piv%22 
For more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start
[debug] [2025-02-17T09:49:20.350Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 200
[debug] [2025-02-17T09:49:20.350Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74 {"name":"projects/meloudy-96af8/locations/us-central1/operations/operation-1739785702606-62e536cca06b7-3c04ce26-9072bb74","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-02-17T09:48:24.697850267Z","endTime":"2025-02-17T09:49:17.956273301Z","target":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/meloudy-96af8/locations/us-central1/functions/setHasUpdateCommentFlag","buildConfig":{"runtime":"nodejs18","entryPoint":"setHasUpdateCommentFlag","source":{"storageSource":{"bucket":"gcf-v2-sources-640370611193-us-central1","object":"setHasUpdateCommentFlag/function-source.zip","generation":"1739785704646694"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts","serviceAccount":"projects/meloudy-96af8/serviceAccounts/640370611193-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/meloudy-96af8/locations/us-central1/services/sethasupdatecommentflag","timeoutSeconds":60,"environmentVariables":{"API_URL":"https://<region>-<meloudy-96af8>.cloudfunctions.net/api/","REDIS_HOST":"127.0.0.1","REDIS_PORT":"6379","REDIS_PASSWORD":"sim0408sik","FIREBASE_CONFIG":"{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}","GCLOUD_PROJECT":"meloudy-96af8","EVENTARC_CLOUD_EVENT_SOURCE":"projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag","FUNCTION_SIGNATURE_TYPE":"cloudevent","FUNCTION_TARGET":"setHasUpdateCommentFlag","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://sethasupdatecommentflag-yb5o5g6mha-uc.a.run.app","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"sethasupdatecommentflag-00020-jab","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"eventTrigger":{"trigger":"projects/meloudy-96af8/locations/asia-northeast3/triggers/sethasupdatecommentflag-981226","triggerRegion":"asia-northeast3","eventType":"google.cloud.firestore.document.v1.created","eventFilters":[{"attribute":"database","value":"(default)"},{"attribute":"namespace","value":"(default)"},{"attribute":"document","value":"posts/{postId}/comments/{commentId}","operator":"match-path-pattern"}],"pubsubTopic":"projects/meloudy-96af8/topics/eventarc-asia-northeast3-sethasupdatecommentflag-981226-823","serviceAccountEmail":"640370611193-compute@developer.gserviceaccount.com","retryPolicy":"RETRY_POLICY_DO_NOT_RETRY"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"b3920094daf3c92d0a5ea4f4e726707901c71c6c"},"environment":"GEN_2","url":"https://us-central1-meloudy-96af8.cloudfunctions.net/setHasUpdateCommentFlag","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"},{"name":"TRIGGER","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Could not create or update Cloud Run service sethasupdatecommentflag, Container Healthcheck failed. Revision 'sethasupdatecommentflag-00021-gel' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdatecommentflag/revision_name/sethasupdatecommentflag-00021-gel&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdatecommentflag%22%0Aresource.labels.revision_name%3D%22sethasupdatecommentflag-00021-gel%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"}}
[debug] [2025-02-17T09:49:20.350Z] Got source token undefined for region us-central1
[error] Could not create or update Cloud Run service sethasupdatecommentflag, Container Healthcheck failed. Revision 'sethasupdatecommentflag-00021-gel' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.

Logs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdatecommentflag/revision_name/sethasupdatecommentflag-00021-gel&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdatecommentflag%22%0Aresource.labels.revision_name%3D%22sethasupdatecommentflag-00021-gel%22 
For more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start
[debug] [2025-02-17T09:49:20.358Z] Total Function Deployment time: 58708
[debug] [2025-02-17T09:49:20.359Z] 2 Functions Deployed
[debug] [2025-02-17T09:49:20.359Z] 2 Functions Errored
[debug] [2025-02-17T09:49:20.359Z] 0 Function Deployments Aborted
[debug] [2025-02-17T09:49:20.359Z] Average Function Deployment time: 58394.5
[info] 
[info] Functions deploy had errors with the following functions:
	setHasUpdateCommentFlag(us-central1)
	setHasUpdateFlag(us-central1)
[info] i  functions: cleaning up build files... 
[debug] [2025-02-17T09:49:20.666Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:20.666Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:20.666Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:20.666Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:20.667Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:20.667Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:20.667Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_comment_flag [none]
[debug] [2025-02-17T09:49:20.668Z] >>> [apiv2][query] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_flag [none]
[debug] [2025-02-17T09:49:20.668Z] >>> [apiv2][query] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list [none]
[debug] [2025-02-17T09:49:21.367Z] <<< [apiv2][status] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list 404
[debug] [2025-02-17T09:49:21.367Z] <<< [apiv2][body] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2025-02-17T09:49:21.367Z] Failed docker command with error  Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2025-02-17T09:49:21.374Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:21.375Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:21.375Z] >>> [apiv2][query] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list [none]
[debug] [2025-02-17T09:49:21.646Z] <<< [apiv2][status] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list 404
[debug] [2025-02-17T09:49:21.647Z] <<< [apiv2][body] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2025-02-17T09:49:21.647Z] Failed docker command with error  Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2025-02-17T09:49:21.750Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:21.750Z] Checked if tokens are valid: true, expires at: 1739788570491
[debug] [2025-02-17T09:49:21.750Z] >>> [apiv2][query] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list [none]
[debug] [2025-02-17T09:49:22.031Z] <<< [apiv2][status] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list 404
[debug] [2025-02-17T09:49:22.031Z] <<< [apiv2][body] GET https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list {"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}]}
[debug] [2025-02-17T09:49:22.032Z] Failed docker command with error  Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found {"name":"FirebaseError","children":[],"context":{"body":{"errors":[{"code":"NAME_UNKNOWN","message":"Repository \"us.gcr.io\" not found"}],"error":{"message":"Not Found"}},"response":{"statusCode":404}},"exit":1,"message":"Request to https://us.gcr.io/v2/meloudy-96af8/gcf/us-central1/tags/list had HTTP Error: 404, Not Found","status":404}
[debug] [2025-02-17T09:49:22.033Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_flag 404
[debug] [2025-02-17T09:49:22.033Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_flag {"error":{"code":404,"message":"Package \"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_flag\" was not found.","status":"NOT_FOUND"}}
[debug] [2025-02-17T09:49:22.050Z] <<< [apiv2][status] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_comment_flag 404
[debug] [2025-02-17T09:49:22.050Z] <<< [apiv2][body] DELETE https://artifactregistry.googleapis.com/v1beta2/projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_comment_flag {"error":{"code":404,"message":"Package \"projects/meloudy-96af8/locations/us-central1/repositories/gcf-artifacts/packages/set_has_update_comment_flag\" was not found.","status":"NOT_FOUND"}}
[warn] !  functions: Unhandled error cleaning up build images. This could result in a small monthly bill if not corrected. You can attempt to delete these images by redeploying or you can delete them manually at https://console.cloud.google.com/gcr/images/meloudy-96af8/us/gcf 
[debug] [2025-02-17T09:49:22.051Z] Functions deploy failed.
[debug] [2025-02-17T09:49:22.051Z] {
  "endpoint": {
    "id": "setHasUpdateFlag",
    "project": "meloudy-96af8",
    "region": "us-central1",
    "entryPoint": "setHasUpdateFlag",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "posts/{postId}"
      },
      "region": "asia-northeast3"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "API_URL": "https://<region>-<meloudy-96af8>.cloudfunctions.net/api/",
      "REDIS_HOST": "127.0.0.1",
      "REDIS_PORT": "6379",
      "REDIS_PASSWORD": "sim0408sik",
      "FIREBASE_CONFIG": "{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}",
      "GCLOUD_PROJECT": "meloudy-96af8",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/meloudy-96af8/locations/us-central1/services/setHasUpdateFlag"
    },
    "codebase": "default",
    "runServiceId": "sethasupdateflag",
    "cpu": 1,
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "b3920094daf3c92d0a5ea4f4e726707901c71c6c"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Could not create or update Cloud Run service sethasupdateflag, Container Healthcheck failed. Revision 'sethasupdateflag-00023-piv' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdateflag/revision_name/sethasupdateflag-00023-piv&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdateflag%22%0Aresource.labels.revision_name%3D%22sethasupdateflag-00023-piv%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start",
    "original": {
      "code": 3,
      "message": "Could not create or update Cloud Run service sethasupdateflag, Container Healthcheck failed. Revision 'sethasupdateflag-00023-piv' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdateflag/revision_name/sethasupdateflag-00023-piv&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdateflag%22%0Aresource.labels.revision_name%3D%22sethasupdateflag-00023-piv%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-02-17T09:49:22.051Z] {
  "endpoint": {
    "id": "setHasUpdateCommentFlag",
    "project": "meloudy-96af8",
    "region": "us-central1",
    "entryPoint": "setHasUpdateCommentFlag",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "eventTrigger": {
      "eventType": "google.cloud.firestore.document.v1.created",
      "retry": false,
      "eventFilters": {
        "database": "(default)",
        "namespace": "(default)"
      },
      "eventFilterPathPatterns": {
        "document": "posts/{postId}/comments/{commentId}"
      },
      "region": "asia-northeast3"
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "ingressSettings": null,
    "availableMemoryMb": null,
    "serviceAccount": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "API_URL": "https://<region>-<meloudy-96af8>.cloudfunctions.net/api/",
      "REDIS_HOST": "127.0.0.1",
      "REDIS_PORT": "6379",
      "REDIS_PASSWORD": "sim0408sik",
      "FIREBASE_CONFIG": "{\"projectId\":\"meloudy-96af8\",\"storageBucket\":\"meloudy-96af8.appspot.com\",\"locationId\":\"asia-northeast3\"}",
      "GCLOUD_PROJECT": "meloudy-96af8",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/meloudy-96af8/locations/us-central1/services/setHasUpdateCommentFlag"
    },
    "codebase": "default",
    "runServiceId": "sethasupdatecommentflag",
    "cpu": 1,
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "b3920094daf3c92d0a5ea4f4e726707901c71c6c"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Could not create or update Cloud Run service sethasupdatecommentflag, Container Healthcheck failed. Revision 'sethasupdatecommentflag-00021-gel' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdatecommentflag/revision_name/sethasupdatecommentflag-00021-gel&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdatecommentflag%22%0Aresource.labels.revision_name%3D%22sethasupdatecommentflag-00021-gel%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start",
    "original": {
      "code": 3,
      "message": "Could not create or update Cloud Run service sethasupdatecommentflag, Container Healthcheck failed. Revision 'sethasupdatecommentflag-00021-gel' is not ready and cannot serve traffic. The user-provided container failed to start and listen on the port defined provided by the PORT=8080 environment variable within the allocated timeout. This can happen when the container port is misconfigured or if the timeout is too short. The health check timeout can be extended. Logs for this revision might contain more information.\n\nLogs URL: https://console.cloud.google.com/logs/viewer?project=meloudy-96af8&resource=cloud_run_revision/service_name/sethasupdatecommentflag/revision_name/sethasupdatecommentflag-00021-gel&advancedFilter=resource.type%3D%22cloud_run_revision%22%0Aresource.labels.service_name%3D%22sethasupdatecommentflag%22%0Aresource.labels.revision_name%3D%22sethasupdatecommentflag-00021-gel%22 \nFor more troubleshooting guidance, see https://cloud.google.com/run/docs/troubleshooting#container-failed-to-start"
    },
    "status": 3,
    "code": 3
  }
}
[error] Error: There was an error deploying functions:
[error] - Error Failed to update function setHasUpdateFlag in region us-central1
[error] - Error Failed to update function setHasUpdateCommentFlag in region us-central1
